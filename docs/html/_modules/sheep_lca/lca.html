<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>sheep_lca.lca &mdash; Sheep LCA 0.3.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=4621528c"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Sheep LCA
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../INSTALLATION.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CONTRIBUTING.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Sheep LCA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">sheep_lca.lca</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for sheep_lca.lca</h1><div class="highlight"><pre>
<span></span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Sheep LCA Module</span>
<span class="sd">------------------</span>

<span class="sd">This module contains classes and methods for calculating the environmental impact of sheep farming, including energy requirements,</span>
<span class="sd">emissions, and waste management. It covers various stages of sheep lifecycle and farm operations such as grazing, housing, manure management, </span>
<span class="sd">and fertilization practices. The module aims to provide a comprehensive assessment tool for understanding and reducing the environmental </span>
<span class="sd">footprint associated with sheep production.</span>

<span class="sd">The module includes detailed assessments of greenhouse gas emissions, eutrophication potential, air quality impacts, and </span>
<span class="sd">resource usage to support sustainable farming practices and decision-making. By integrating data from various sources and </span>
<span class="sd">applying region-specific (Ireland) emission factors, the module helps in evaluating the overall environmental performance of sheep farms.</span>

<span class="sd">Key Features:</span>
<span class="sd">- Calculation of energy consumption and efficiency in sheep farming.</span>
<span class="sd">- Estimation of greenhouse gas emissions from enteric fermentation, manure management, and other farm activities.</span>
<span class="sd">- Assessment of nutrient runoff and its impact on eutrophication.</span>
<span class="sd">- Evaluation of ammonia emissions and their contribution to air quality issues.</span>
<span class="sd">- Analysis of upstream impacts related to feed production, fertilizer use, and other inputs.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">sheep_lca.resource_manager.sheep_lca_data_manager</span> <span class="kn">import</span> <span class="n">LCADataManager</span>
<span class="kn">import</span> <span class="nn">copy</span>

<div class="viewcode-block" id="Energy">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Energy">[docs]</a>
<span class="k">class</span> <span class="nc">Energy</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class for calculating various energy needs and outputs for sheep in different stages of their lifecycle and production phases.</span>

<span class="sd">    Attributes:</span>
<span class="sd">    - data_manager_class (LCADataManager): Manages and provides access to relevant LCA data based on the specific country&#39;s environmental factors and agricultural practices.</span>
<span class="sd">    </span>
<span class="sd">    Methods:</span>
<span class="sd">    - ratio_of_net_energy_maintenance(animal): Calculates the ratio of net energy needed for maintenance (REM) of sheep.</span>
<span class="sd">    - ratio_of_net_energy_growth(animal): Calculates the ratio of net energy for growth (REG) of sheep.</span>
<span class="sd">    - net_energy_for_maintenance(animal): Estimates the net energy required for the maintenance of sheep based on their body weight and energy coefficients.</span>
<span class="sd">    - net_energy_for_activity(animal): Determines the energy expended by sheep for their physical activities based on their grazing patterns.</span>
<span class="sd">    - net_energy_for_weight_gain(animal): Computes the net energy used for weight gain in sheep, essential for growing lambs and breeding ewes.</span>
<span class="sd">    - net_energy_for_lactation(animal): Calculates the energy required for lactation, critical for nursing ewes.</span>
<span class="sd">    - net_energy_for_wool(animal): Estimates the energy utilized for wool production, pertinent for wool breeds.</span>
<span class="sd">    - net_energy_for_pregnancy(animal): Assesses the energy needs for pregnant ewes.</span>
<span class="sd">    - gross_energy_from_concentrate(animal): Evaluates the total energy derived from concentrate feeds provided to the sheep.</span>
<span class="sd">    - gross_amount_from_con_in_percent(animal, share_in_percent): Estimates the proportion of energy intake from concentrates compared to the total diet.</span>
<span class="sd">    - gross_energy_from_grass(animal): Calculates the total energy intake from grass, the primary forage source for grazing sheep.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ef_country</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span> <span class="o">=</span> <span class="n">LCADataManager</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>

<div class="viewcode-block" id="Energy.ratio_of_net_energy_maintenance">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Energy.ratio_of_net_energy_maintenance">[docs]</a>
    <span class="k">def</span> <span class="nf">ratio_of_net_energy_maintenance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the Ratio of Net Energy for Maintenance (REM) for sheep, considering their specific diet.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">        - animal (Sheep): The sheep cohort under evaluation.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        - float: The ratio of energy available for maintenance after accounting for the digestible energy from the diet.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">DE</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_forage_digestibility</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">forage</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="mf">1.123</span>
            <span class="o">-</span> <span class="p">(</span><span class="mf">4.092</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span><span class="o">**-</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">DE</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="mf">1.126</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span><span class="o">**-</span><span class="mi">5</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">DE</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
            <span class="o">-</span> <span class="p">(</span><span class="mf">25.4</span> <span class="o">/</span> <span class="n">DE</span><span class="p">)</span>
        <span class="p">)</span></div>



<div class="viewcode-block" id="Energy.ratio_of_net_energy_growth">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Energy.ratio_of_net_energy_growth">[docs]</a>
    <span class="k">def</span> <span class="nf">ratio_of_net_energy_growth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the Ratio of Net Energy for Growth (REG) for sheep, taking into account the total energy consumed.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">        - animal (Sheep): The sheep cohort under evaluation.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        - float: The ratio of energy available for growth, important for lambs and growing sheep.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">DE</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_forage_digestibility</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">forage</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="mf">1.164</span>
            <span class="o">-</span> <span class="p">(</span><span class="mf">5.160</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span><span class="o">**-</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">DE</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="mf">1.308</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span><span class="o">**-</span><span class="mi">5</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">DE</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
            <span class="o">-</span> <span class="p">(</span><span class="mf">37.4</span> <span class="o">/</span> <span class="n">DE</span><span class="p">)</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="Energy.net_energy_for_maintenance">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Energy.net_energy_for_maintenance">[docs]</a>
    <span class="k">def</span> <span class="nf">net_energy_for_maintenance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimates the net energy required for maintaining the basic life functions of sheep based on their weight.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">        - animal (Sheep): The sheep under evaluation.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        - float: Total energy required for maintenance expressed in MJ/day.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cfi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_parameter</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">cohort</span><span class="p">,</span> <span class="s2">&quot;coefficient&quot;</span><span class="p">)()</span>

        <span class="k">return</span> <span class="n">cfi</span> <span class="o">*</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">weight</span><span class="o">**</span><span class="mf">0.75</span><span class="p">)</span></div>


<div class="viewcode-block" id="Energy.net_energy_for_activity">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Energy.net_energy_for_activity">[docs]</a>
    <span class="k">def</span> <span class="nf">net_energy_for_activity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determines the energy expended by sheep for their physical activities based on typical grazing and movement patterns.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">        - animal (Sheep): The sheep under evaluation.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        - float: Additional energy expended for activities, in MJ/day.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_grazing_type</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">grazing</span><span class="p">)()</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">weight</span></div>



<div class="viewcode-block" id="Energy.net_energy_for_weight_gain">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Energy.net_energy_for_weight_gain">[docs]</a>
    <span class="k">def</span> <span class="nf">net_energy_for_weight_gain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes the net energy utilized for weight gain, considering the typical growth rates of sheep.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">        - animal (Sheep): The sheep under evaluation.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        - float: Energy used for growth in MJ/day.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">year</span> <span class="o">=</span> <span class="mi">365</span>

        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_parameter</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">cohort</span><span class="p">,</span> <span class="s2">&quot;coefficient_a&quot;</span><span class="p">)()</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_parameter</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">cohort</span><span class="p">,</span> <span class="s2">&quot;coefficient_b&quot;</span><span class="p">)()</span>

        <span class="n">bw_initial</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_parameter</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">cohort</span><span class="p">,</span> <span class="s2">&quot;bwf&quot;</span><span class="p">)()</span>
        <span class="n">bw_finish</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_parameter</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">cohort</span><span class="p">,</span> <span class="s2">&quot;bwi&quot;</span><span class="p">)()</span>

        <span class="n">weight_gain</span> <span class="o">=</span> <span class="n">bw_finish</span> <span class="o">-</span> <span class="n">bw_initial</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">weight_gain</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">b</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">bw_initial</span> <span class="o">+</span> <span class="n">bw_finish</span><span class="p">)))</span> <span class="o">/</span> <span class="n">year</span></div>

    

<div class="viewcode-block" id="Energy.net_energy_for_lactation">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Energy.net_energy_for_lactation">[docs]</a>
    <span class="k">def</span> <span class="nf">net_energy_for_lactation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the energy required for lactation.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">        - animal (Sheep): The lactating ewe under evaluation.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        - float: Energy needed for producing milk, expressed in MJ/day.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">milk_energy</span> <span class="o">=</span> <span class="mf">4.6</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_parameter</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">cohort</span><span class="p">,</span> <span class="s2">&quot;lactation&quot;</span><span class="p">):</span>

            <span class="k">return</span> <span class="p">((</span><span class="mi">5</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_lactation_weight</span><span class="p">())</span> <span class="o">/</span> <span class="mi">365</span><span class="p">)</span> <span class="o">*</span> <span class="n">milk_energy</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span></div>

        

<div class="viewcode-block" id="Energy.net_energy_for_wool">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Energy.net_energy_for_wool">[docs]</a>
    <span class="k">def</span> <span class="nf">net_energy_for_wool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimates the energy used for wool production.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">        - animal (Sheep): The wool-producing sheep under evaluation.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        - float: Energy allocated for wool growth, in MJ/day.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">energy_val_wool</span> <span class="o">=</span> <span class="mi">24</span>

        <span class="n">wool_production</span> <span class="o">=</span> <span class="n">animal</span><span class="o">.</span><span class="n">wool</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">energy_val_wool</span> <span class="o">*</span> <span class="n">wool_production</span><span class="p">)</span> <span class="o">/</span> <span class="mi">365</span></div>



<div class="viewcode-block" id="Energy.net_energy_for_pregnancy">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Energy.net_energy_for_pregnancy">[docs]</a>
    <span class="k">def</span> <span class="nf">net_energy_for_pregnancy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Assesses the additional energy requirements for pregnant ewes.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">        - animal (Sheep): The pregnant ewe under evaluation.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        - float: Additional energy required for supporting pregnancy, in MJ/day.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">coef</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_parameter</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">cohort</span><span class="p">,</span> <span class="s2">&quot;pregnancy&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">coef</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">nep</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">nep</span> <span class="o">=</span> <span class="n">coef</span><span class="p">()</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_energy_for_maintenance</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">nep</span></div>


<div class="viewcode-block" id="Energy.gross_energy_from_concentrate">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Energy.gross_energy_from_concentrate">[docs]</a>
    <span class="k">def</span> <span class="nf">gross_energy_from_concentrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Evaluates the total energy derived from concentrate feeds.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">        - animal (Sheep): The sheep consuming the concentrate.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        - float: Total energy derived from concentrate feed, in MJ.</span>
<span class="sd">        </span>
<span class="sd">        Note:</span>
<span class="sd">        - Concentrates are often used to supplement grazing, especially in intensive farming systems.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_concentrate_digestibility</span><span class="p">(</span>
            <span class="n">animal</span><span class="o">.</span><span class="n">con_type</span>
        <span class="p">)</span>
        <span class="n">mj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_con_dry_matter_gross_energy</span><span class="p">(</span>
            <span class="n">animal</span><span class="o">.</span><span class="n">con_type</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">con_amount</span> <span class="o">*</span> <span class="n">dm</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span> <span class="o">*</span> <span class="n">mj</span></div>



<div class="viewcode-block" id="Energy.gross_amount_from_con_in_percent">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Energy.gross_amount_from_con_in_percent">[docs]</a>
    <span class="k">def</span> <span class="nf">gross_amount_from_con_in_percent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">,</span> <span class="n">share_in_percent</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimates the total energy intake for sheep based on a specified percentage of concentrate in their diet, </span>
<span class="sd">        taking into account the energy from both grass and concentrate.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - animal (Sheep): The sheep under evaluation.</span>
<span class="sd">        - share_in_percent (float): The percentage of the diet that is made up of concentrate.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Total gross energy intake from the diet, factoring in the specified percentage of concentrate, expressed in Megajoules (MJ).</span>

<span class="sd">        Note:</span>
<span class="sd">        - This method integrates all energy components including maintenance, activity, lactation, pregnancy, and growth to calculate the overall energy intake.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">REM</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_of_net_energy_maintenance</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">REG</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_of_net_energy_growth</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">NEM</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_energy_for_maintenance</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">NEA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_energy_for_activity</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">NEL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_energy_for_lactation</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">NEP</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_energy_for_pregnancy</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">NEG</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_energy_for_weight_gain</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">dm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_concentrate_digestibility</span><span class="p">(</span>
            <span class="n">animal</span><span class="o">.</span><span class="n">con_type</span>
        <span class="p">)</span>
        <span class="n">DMD</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_forage_digestibility</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">forage</span><span class="p">)</span>
        <span class="n">mj_con</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_con_dry_matter_gross_energy</span><span class="p">(</span>
            <span class="n">animal</span><span class="o">.</span><span class="n">con_type</span>
        <span class="p">)</span>
        <span class="n">mj_grass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_grass_dry_matter_gross_energy</span><span class="p">(</span>
            <span class="n">animal</span><span class="o">.</span><span class="n">forage</span>
        <span class="p">)</span>

        <span class="n">DMD_average</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">share_in_percent</span> <span class="o">/</span> <span class="mf">100.0</span> <span class="o">*</span> <span class="n">dm</span> <span class="o">+</span> <span class="p">(</span><span class="mf">100.0</span> <span class="o">-</span> <span class="n">share_in_percent</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">DMD</span>
        <span class="p">)</span>
        <span class="n">mj_average</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">share_in_percent</span> <span class="o">/</span> <span class="mf">100.0</span> <span class="o">*</span> <span class="n">mj_con</span>
            <span class="o">+</span> <span class="p">(</span><span class="mf">100.0</span> <span class="o">-</span> <span class="n">share_in_percent</span><span class="p">)</span> <span class="o">/</span> <span class="mf">100.0</span> <span class="o">*</span> <span class="n">mj_grass</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="p">((((</span><span class="n">NEM</span> <span class="o">+</span> <span class="n">NEA</span> <span class="o">+</span> <span class="n">NEL</span> <span class="o">+</span> <span class="n">NEP</span><span class="p">)</span> <span class="o">/</span> <span class="n">REM</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">NEG</span> <span class="o">/</span> <span class="n">REG</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="n">DMD_average</span> <span class="o">/</span> <span class="mf">100.0</span><span class="p">))</span>
            <span class="o">/</span> <span class="n">mj_average</span>
            <span class="o">*</span> <span class="p">(</span><span class="n">share_in_percent</span> <span class="o">/</span> <span class="p">(</span><span class="mf">100.0</span><span class="p">))</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="Energy.gross_energy_from_grass">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Energy.gross_energy_from_grass">[docs]</a>
    <span class="k">def</span> <span class="nf">gross_energy_from_grass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the total gross energy intake from grass for sheep after considering the energy provided by concentrates. </span>

<span class="sd">        Parameters:</span>
<span class="sd">        - animal (Sheep): The sheep under evaluation.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Total gross energy intake from grass, after subtracting the energy supplied by concentrates, expressed in Megajoules (MJ).</span>

<span class="sd">        Note:</span>
<span class="sd">        - This calculation takes into account the energy for maintenance, activity, lactation, pregnancy, growth, and wool production, adjusted for the energy supplied by concentrates.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">DMD</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_forage_digestibility</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">forage</span><span class="p">)</span>

        <span class="n">REM</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_of_net_energy_maintenance</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">REG</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ratio_of_net_energy_growth</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">NEM</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_energy_for_maintenance</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">NEA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_energy_for_activity</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">NEL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_energy_for_lactation</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">NEP</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_energy_for_pregnancy</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">NEG</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_energy_for_weight_gain</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">NEW</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_energy_for_wool</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">con</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gross_energy_from_concentrate</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(((</span><span class="n">NEM</span> <span class="o">+</span> <span class="n">NEA</span> <span class="o">+</span> <span class="n">NEL</span> <span class="o">+</span> <span class="n">NEP</span><span class="p">)</span> <span class="o">/</span> <span class="n">REM</span><span class="p">)</span> <span class="o">+</span> <span class="p">((</span><span class="n">NEG</span> <span class="o">+</span> <span class="n">NEW</span><span class="p">)</span> <span class="o">/</span> <span class="n">REG</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="n">DMD</span> <span class="o">/</span> <span class="mf">100.0</span><span class="p">)</span>
        <span class="p">)</span> <span class="o">-</span> <span class="n">con</span></div>
</div>



<div class="viewcode-block" id="GrassFeed">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.GrassFeed">[docs]</a>
<span class="k">class</span> <span class="nc">GrassFeed</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class is responsible for managing the nutritional energy calculations for grass-fed livestock, </span>
<span class="sd">    integrating various energy needs such as maintenance, growth, and reproduction, and calculating the methane emissions </span>
<span class="sd">    factor from the animals&#39; feed intake.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        energy_class (Energy): Instance of the Energy class to access energy-related calculations.</span>
<span class="sd">        data_manager_class (LCADataManager): Instance of the LCADataManager class for accessing livestock and environmental parameters.</span>

<span class="sd">    Methods:</span>
<span class="sd">        dry_matter_from_grass: Estimates the amount of dry matter consumed from grass after accounting for the energy provided by concentrates.</span>
<span class="sd">        ch4_emissions_factor: Calculates the methane emissions factor based on the animal&#39;s total energy intake from grass and concentrates.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ef_country</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span> <span class="o">=</span> <span class="n">Energy</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span> <span class="o">=</span> <span class="n">LCADataManager</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>

<div class="viewcode-block" id="GrassFeed.dry_matter_from_grass">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.GrassFeed.dry_matter_from_grass">[docs]</a>
    <span class="k">def</span> <span class="nf">dry_matter_from_grass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimates the amount of dry matter consumed from grass by the animal, factoring in the energy contributions from both grass and concentrates.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - animal (Animal): The animal for which the dry matter intake is being calculated.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Total dry matter consumed from grass, expressed in kg/day.</span>
<span class="sd">        </span>
<span class="sd">        Note:</span>
<span class="sd">        - This calculation integrates various energy needs of the animal, such as maintenance, activity, lactation, pregnancy, and growth, and adjusts for the energy supplied by concentrates.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">DMD</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_forage_digestibility</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">forage</span><span class="p">)</span>

        <span class="n">REM</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span><span class="o">.</span><span class="n">ratio_of_net_energy_maintenance</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">REG</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span><span class="o">.</span><span class="n">ratio_of_net_energy_growth</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">NEM</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span><span class="o">.</span><span class="n">net_energy_for_maintenance</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">NEA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span><span class="o">.</span><span class="n">net_energy_for_activity</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">NEL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span><span class="o">.</span><span class="n">net_energy_for_lactation</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">NEP</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span><span class="o">.</span><span class="n">net_energy_for_pregnancy</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">NEG</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span><span class="o">.</span><span class="n">net_energy_for_weight_gain</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">con</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span><span class="o">.</span><span class="n">gross_energy_from_concentrate</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">GE</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_grass_dry_matter_gross_energy</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">forage</span><span class="p">)</span>
        <span class="n">dm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_concentrate_digestibility</span><span class="p">(</span>
            <span class="n">animal</span><span class="o">.</span><span class="n">con_type</span>
        <span class="p">)</span>

        <span class="n">share_con</span> <span class="o">=</span> <span class="n">con</span> <span class="o">/</span> <span class="p">(((</span><span class="n">NEM</span> <span class="o">+</span> <span class="n">NEA</span> <span class="o">+</span> <span class="n">NEL</span> <span class="o">+</span> <span class="n">NEP</span><span class="p">)</span> <span class="o">/</span> <span class="n">REM</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">NEG</span> <span class="o">/</span> <span class="n">REG</span><span class="p">))</span>

        <span class="n">DMD_average</span> <span class="o">=</span> <span class="n">share_con</span> <span class="o">*</span> <span class="n">dm</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">share_con</span><span class="p">)</span> <span class="o">*</span> <span class="n">DMD</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(</span>
                <span class="p">(((</span><span class="n">NEM</span> <span class="o">+</span> <span class="n">NEA</span> <span class="o">+</span> <span class="n">NEL</span> <span class="o">+</span> <span class="n">NEP</span><span class="p">)</span> <span class="o">/</span> <span class="n">REM</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">NEG</span> <span class="o">/</span> <span class="n">REG</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="n">DMD_average</span> <span class="o">/</span> <span class="mf">100.0</span><span class="p">)</span>
                <span class="o">-</span> <span class="n">con</span>
            <span class="p">)</span>
        <span class="p">)</span> <span class="o">/</span> <span class="n">GE</span></div>


    <span class="c1">#########################################################################################################</span>
    <span class="c1"># CH4 CAlculations</span>
    <span class="c1">########################################################################################################</span>

<div class="viewcode-block" id="GrassFeed.ch4_emissions_factor">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.GrassFeed.ch4_emissions_factor">[docs]</a>
    <span class="k">def</span> <span class="nf">ch4_emissions_factor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the methane emissions factor for the animal based on its total energy intake from both grass and concentrates. This factor is used to estimate the methane emissions from feed intake.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - animal (Animal): The animal for which the methane emissions factor is being calculated.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: Methane emissions factor, expressed in kg CH4/year.</span>
<span class="sd">        </span>
<span class="sd">        Note:</span>
<span class="sd">        - This calculation follows the IPCC 2019 guidelines and considers the specific methane conversion factor for the animal category.</span>
<span class="sd">        - For lambs, a different conversion factor is used as per NIR 2020 adjustments.</span>
<span class="sd">        </span>


<span class="sd">        IPCC 2019 EQUATION 10.21</span>

<span class="sd">        As per NIR 2020, lambs have an assumed Ym of 4.5 instead of 6.7 as per IPCC.</span>

<span class="sd">            GEC = Gross Energy from Concentrates</span>
<span class="sd">            GEG = Gross Energy from GE_grass</span>
<span class="sd">            GET = Gross Energy total</span>
<span class="sd">            Ym  = Methane conversion factor, percent of gross energy content of methane</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">year</span> <span class="o">=</span> <span class="mi">365</span>
        <span class="n">Ym</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_parameter</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">cohort</span><span class="p">,</span> <span class="s2">&quot;methane_conversion_factor&quot;</span><span class="p">)()</span>
        <span class="n">methane_energy</span> <span class="o">=</span> <span class="mf">55.65</span>  <span class="c1"># MJ/kg of CH4</span>

        <span class="n">GEC</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span><span class="o">.</span><span class="n">gross_energy_from_concentrate</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">GEG</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span><span class="o">.</span><span class="n">gross_energy_from_grass</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>

        <span class="n">GET</span> <span class="o">=</span> <span class="n">GEC</span> <span class="o">+</span> <span class="n">GEG</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">GET</span> <span class="o">*</span> <span class="n">Ym</span> <span class="o">*</span> <span class="n">year</span><span class="p">)</span> <span class="o">/</span> <span class="n">methane_energy</span></div>
</div>



<span class="c1">#############################################################################################</span>
<span class="c1"># Grazing Stage</span>
<span class="c1">#############################################################################################</span>


<div class="viewcode-block" id="GrazingStage">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.GrazingStage">[docs]</a>
<span class="k">class</span> <span class="nc">GrazingStage</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The GrazingStage class calculates various metrics related to the environmental impact of grazing animals. </span>
<span class="sd">    This includes the volatile solids excretion rate to pasture, net nitrogen excretion, methane emissions from grazing, ammonia emissions, </span>
<span class="sd">    nitrogen and phosphorus leaching, and direct and indirect N2O emissions from pasture.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        energy_class : Energy</span>
<span class="sd">            An instance of the Energy class, used for calculations involving energy metrics of animals.</span>
<span class="sd">        grass_feed_class : GrassFeed</span>
<span class="sd">            An instance of the GrassFeed class, used to calculate energy intake from grasses.</span>
<span class="sd">        data_manager_class : LCADataManager</span>
<span class="sd">            An instance of the LCADataManager class, used to access data necessary for the calculations.</span>

<span class="sd">    Methods:</span>
<span class="sd">        percent_outdoors(animal)</span>
<span class="sd">            Calculates the percentage of time an animal spends outdoors based on its time outdoors attribute.</span>
<span class="sd">        volatile_solids_excretion_rate_GRAZING(animal)</span>
<span class="sd">            Calculates the rate at which volatile solids are excreted to pasture by the animal.</span>
<span class="sd">        net_excretion_GRAZING(animal)</span>
<span class="sd">            Calculates the net nitrogen excretion per kilogram to pasture by the animal.</span>
<span class="sd">        ch4_emissions_for_grazing(animal)</span>
<span class="sd">            Estimates the methane emissions from the animal excretion while grazing.</span>
<span class="sd">        nh3_emissions_per_year_GRAZING(animal)</span>
<span class="sd">            Calculates the total ammonia emissions per year from the animal while grazing.</span>
<span class="sd">        Nleach_GRAZING(animal)</span>
<span class="sd">            Estimates the amount of nitrogen leached from the pasture due to the grazing animal.</span>
<span class="sd">        PLeach_GRAZING(animal)</span>
<span class="sd">            Estimates the amount of phosphorus leached from the pasture due to the grazing animal.</span>
<span class="sd">        PRP_N2O_direct(animal)</span>
<span class="sd">            Calculates the direct nitrous oxide emissions from pasture, range, and paddock due to the grazing animal.</span>
<span class="sd">        PRP_N2O_indirect(animal)</span>
<span class="sd">            Calculates the indirect nitrous oxide emissions from atmospheric deposition and leaching related to pasture, </span>
<span class="sd">            range, and paddock due to the grazing animal.</span>
<span class="sd">        &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ef_country</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span> <span class="o">=</span> <span class="n">LCADataManager</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span> <span class="o">=</span> <span class="n">Energy</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grass_feed_class</span> <span class="o">=</span> <span class="n">GrassFeed</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>

<div class="viewcode-block" id="GrazingStage.percent_outdoors">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.GrazingStage.percent_outdoors">[docs]</a>
    <span class="k">def</span> <span class="nf">percent_outdoors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the percentage of the day that the animal spends outdoors.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - animal (object): The animal object containing relevant data such as time spent outdoors.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: The percentage of the day the animal spends outdoors.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">hours</span> <span class="o">=</span> <span class="mi">24</span>
        <span class="k">return</span> <span class="n">animal</span><span class="o">.</span><span class="n">t_outdoors</span> <span class="o">/</span> <span class="n">hours</span></div>


<div class="viewcode-block" id="GrazingStage.volatile_solids_excretion_rate_GRAZING">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.GrazingStage.volatile_solids_excretion_rate_GRAZING">[docs]</a>
    <span class="k">def</span> <span class="nf">volatile_solids_excretion_rate_GRAZING</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the rate at which volatile solids are excreted to pasture by the animal, an essential factor in assessing the environmental impact of grazing. </span>

<span class="sd">        Parameters:</span>
<span class="sd">        - animal (object): The animal for which the volatile solids excretion rate is calculated.</span>

<span class="sd">        Returns:</span>
<span class="sd">        - float: The rate of volatile solids excretion to pasture (kg/day).</span>

<span class="sd">        Note:</span>
<span class="sd">        - This calculation considers the digestibility of both concentrate and grass, the urinary energy, and the ash content of the manure.</span>
<span class="sd">        - &#39;GEC&#39; represents the gross energy from concentrates consumed by the animal.</span>
<span class="sd">        - &#39;GEG&#39; denotes the gross energy from grass consumed.</span>
<span class="sd">        - &#39;DE&#39; stands for the percentage of digestible energy from the consumed feed.</span>
<span class="sd">        - &#39;UE&#39; refers to the energy lost through urination.</span>
<span class="sd">        - &#39;ASH&#39; represents the incombustible inorganic matter present in the animal&#39;s waste.</span>
<span class="sd">        - The calculation adjusts for the time the animal spends outdoors (&#39;OUT&#39;), influencing the amount of waste directly deposited onto pasture.</span>
<span class="sd">        - The constant &#39;18.45&#39; is used as a conversion factor for dietary gross energy per kilogram of dry matter, expressed in MJ kg-1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">DEC</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_concentrate_digestable_energy</span><span class="p">(</span>
            <span class="n">animal</span><span class="o">.</span><span class="n">con_type</span>
        <span class="p">)</span>  <span class="c1"># Digestibility</span>
        <span class="n">UE</span> <span class="o">=</span> <span class="mf">0.04</span>
        <span class="n">ASH</span> <span class="o">=</span> <span class="mf">0.08</span>
        <span class="n">DMD</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_forage_digestibility</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">forage</span><span class="p">)</span>
        <span class="n">GEC</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span><span class="o">.</span><span class="n">gross_energy_from_concentrate</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">GEG</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span><span class="o">.</span><span class="n">gross_energy_from_grass</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">OUT</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">percent_outdoors</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(((</span><span class="n">GEG</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">DMD</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="n">UE</span> <span class="o">*</span> <span class="n">GEG</span><span class="p">))</span> <span class="o">*</span> <span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">ASH</span><span class="p">)</span> <span class="o">/</span> <span class="mf">18.45</span><span class="p">))</span>
            <span class="o">+</span> <span class="p">((</span><span class="n">GEC</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">DEC</span> <span class="o">/</span> <span class="mi">100</span><span class="p">))</span> <span class="o">+</span> <span class="p">(</span><span class="n">UE</span> <span class="o">*</span> <span class="n">GEC</span><span class="p">))</span> <span class="o">*</span> <span class="p">(((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">ASH</span><span class="p">)</span> <span class="o">/</span> <span class="mf">18.45</span><span class="p">)))</span>
        <span class="p">)</span> <span class="o">*</span> <span class="n">OUT</span></div>

    

<div class="viewcode-block" id="GrazingStage.net_excretion_GRAZING">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.GrazingStage.net_excretion_GRAZING">[docs]</a>
    <span class="k">def</span> <span class="nf">net_excretion_GRAZING</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the net nitrogen excretion per kilogram to pasture by grazing animals.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">        - animal (object): The animal for which the calculation is performed.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        - float: Net nitrogen excretion per kilogram to pasture by the animal.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">CP</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_concentrate_crude_protein</span><span class="p">(</span>
            <span class="n">animal</span><span class="o">.</span><span class="n">con_type</span>
        <span class="p">)</span>  <span class="c1"># crude protein percentage (N contained in crude protein), apparently, 16% is the average N content; https://www.feedipedia.org/node/8329</span>
        <span class="n">FCP</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_grass_crude_protein</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">forage</span><span class="p">)</span>
        <span class="n">GEC</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span><span class="o">.</span><span class="n">gross_energy_from_concentrate</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">GEG</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span><span class="o">.</span><span class="n">gross_energy_from_grass</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">OUT</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">percent_outdoors</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">N_retention_frac</span> <span class="o">=</span> <span class="mf">0.10</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(((</span><span class="n">GEC</span> <span class="o">*</span> <span class="mi">365</span><span class="p">)</span> <span class="o">/</span> <span class="mf">18.45</span><span class="p">)</span> <span class="o">*</span> <span class="p">((</span><span class="n">CP</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span> <span class="o">/</span> <span class="mf">6.25</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">N_retention_frac</span><span class="p">))</span>
            <span class="o">+</span> <span class="p">((((</span><span class="n">GEG</span> <span class="o">*</span> <span class="mi">365</span><span class="p">)</span> <span class="o">/</span> <span class="mf">18.45</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">FCP</span> <span class="o">/</span> <span class="mf">100.0</span><span class="p">)</span> <span class="o">/</span> <span class="mf">6.25</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">N_retention_frac</span><span class="p">))</span>
        <span class="p">)</span> <span class="o">*</span> <span class="n">OUT</span></div>


<div class="viewcode-block" id="GrazingStage.ch4_emissions_for_grazing">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.GrazingStage.ch4_emissions_for_grazing">[docs]</a>
    <span class="k">def</span> <span class="nf">ch4_emissions_for_grazing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimates the methane emissions resulting from the animal&#39;s excretion while grazing.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">        - animal (object): The animal for which the methane emissions are estimated.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        - float: Estimated methane emissions from grazing, measured in kilograms per year.</span>
<span class="sd">        </span>
<span class="sd">        Note:</span>
<span class="sd">        The estimation follows the IPCC 2019 methodology and adjusts for animal size and time spent outdoors.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">year</span> <span class="o">=</span> <span class="mi">365</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">volatile_solids_excretion_rate_GRAZING</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span> <span class="o">*</span> <span class="n">year</span><span class="p">)</span>
            <span class="o">*</span> <span class="mf">0.1</span>
            <span class="o">*</span> <span class="mf">0.67</span>
            <span class="o">*</span> <span class="mf">0.19</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="GrazingStage.nh3_emissions_per_year_GRAZING">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.GrazingStage.nh3_emissions_per_year_GRAZING">[docs]</a>
    <span class="k">def</span> <span class="nf">nh3_emissions_per_year_GRAZING</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total annual ammonia emissions from grazing animals.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">        - animal (object): The animal for which the ammonia emissions are calculated.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        - float: Total ammonia emissions from grazing, measured over a year.</span>
<span class="sd">        </span>
<span class="sd">        Note:</span>
<span class="sd">        This calculation is based on net nitrogen excretion and the time the animal spends grazing.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">TAN</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_parameter</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">cohort</span><span class="p">,</span> <span class="s2">&quot;total_ammonia_nitrogen&quot;</span><span class="p">)()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_excretion_GRAZING</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.6</span> <span class="o">*</span> <span class="n">TAN</span></div>


<div class="viewcode-block" id="GrazingStage.Nleach_GRAZING">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.GrazingStage.Nleach_GRAZING">[docs]</a>
    <span class="k">def</span> <span class="nf">Nleach_GRAZING</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimates the amount of nitrogen leached from the pasture as a result of the grazing animal&#39;s activities.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">        - animal (object): The animal for which nitrogen leaching is being estimated.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        - float: Estimated nitrogen leached from the pasture, as a percentage of total nitrogen excretion.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ten_percent_nex</span> <span class="o">=</span> <span class="mf">0.1</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_excretion_GRAZING</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span> <span class="o">*</span> <span class="n">ten_percent_nex</span></div>


<div class="viewcode-block" id="GrazingStage.PLeach_GRAZING">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.GrazingStage.PLeach_GRAZING">[docs]</a>
    <span class="k">def</span> <span class="nf">PLeach_GRAZING</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimates the amount of phosphorus leached from the pasture due to the animal&#39;s grazing.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">        - animal (object): The animal for which phosphorus leaching is estimated.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        - float: Estimated phosphorus leached from the pasture.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">net_excretion_GRAZING</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.8</span> <span class="o">/</span> <span class="mi">5</span><span class="p">))</span> <span class="o">*</span> <span class="mf">0.03</span></div>


    <span class="c1"># direct and indirect (from leaching) N20 from PRP</span>

<div class="viewcode-block" id="GrazingStage.PRP_N2O_direct">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.GrazingStage.PRP_N2O_direct">[docs]</a>
    <span class="k">def</span> <span class="nf">PRP_N2O_direct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates direct nitrous oxide (N2O) emissions from pasture, range, and paddock (PRP) attributable to the grazing animal.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">        - animal (object): The animal for which the direct N2O emissions are calculated.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        - float: Direct N2O emissions from PRP due to the grazing animal.</span>
<span class="sd">        </span>
<span class="sd">        Note:</span>
<span class="sd">        Applies IPCC guidelines for direct N2O emissions from animal excretion on pasture.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">EF</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_parameter</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">cohort</span><span class="p">,</span> <span class="s2">&quot;direct_n2o&quot;</span><span class="p">)()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_excretion_GRAZING</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span> <span class="o">*</span> <span class="n">EF</span></div>


<div class="viewcode-block" id="GrazingStage.PRP_N2O_indirect">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.GrazingStage.PRP_N2O_indirect">[docs]</a>
    <span class="k">def</span> <span class="nf">PRP_N2O_indirect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates indirect N2O emissions from atmospheric deposition and leaching related to pasture, range, and paddock due to grazing animals.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">        - animal (object): The grazing animal for which the indirect N2O emissions are estimated.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        - float: Indirect N2O emissions from PRP attributable to the animal.</span>
<span class="sd">        </span>
<span class="sd">        Note:</span>
<span class="sd">        Indirect emissions are calculated based on ammonia emissions and nitrogen leaching, following IPCC guidelines.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">indirect_atmosphere</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_parameter</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">cohort</span><span class="p">,</span> <span class="s2">&quot;atmospheric_deposition&quot;</span><span class="p">)()</span>
        <span class="n">indirect_leaching</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_parameter</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">cohort</span><span class="p">,</span> <span class="s2">&quot;leaching&quot;</span><span class="p">)()</span>

        <span class="n">NH3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nh3_emissions_per_year_GRAZING</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">NL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Nleach_GRAZING</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">NH3</span> <span class="o">*</span> <span class="n">indirect_atmosphere</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">NL</span> <span class="o">*</span> <span class="n">indirect_leaching</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="HousingStage">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.HousingStage">[docs]</a>
<span class="k">class</span> <span class="nc">HousingStage</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The HousingStage class calculates various environmental impacts related to the housing of animals. This includes the calculation of volatile solids excretion, nitrogen excretion, ammonia emissions, and indirect nitrous oxide emissions during the period when animals are housed.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - ef_country: A country-specific factor that might affect the environmental calculations.</span>

<span class="sd">    Methods:</span>
<span class="sd">    - percent_indoors(animal): Calculates the percentage of time animals spend indoors.</span>
<span class="sd">    - VS_HOUSED(animal): Calculates the volatile solids excreted per day when animals are housed.</span>
<span class="sd">    - net_excretion_HOUSED(animal): Calculates the nitrogen excreted per year while animals are housed.</span>
<span class="sd">    - total_ammonia_nitrogen_nh4_HOUSED(animal): Calculates the total ammonia nitrogen excreted per year while housed.</span>
<span class="sd">    - nh3_emissions_per_year_HOUSED(animal): Calculates the total ammonia emissions per year from housing.</span>
<span class="sd">    - HOUSING_N2O_indirect(animal): Calculates indirect nitrous oxide emissions from housing.</span>
<span class="sd">    &quot;&quot;&quot;</span>    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ef_country</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span> <span class="o">=</span> <span class="n">LCADataManager</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span> <span class="o">=</span> <span class="n">Energy</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>

<div class="viewcode-block" id="HousingStage.percent_indoors">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.HousingStage.percent_indoors">[docs]</a>
    <span class="k">def</span> <span class="nf">percent_indoors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the percentage of time that the animal spends indoors, combining time spent indoors and stabled.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            - animal (object): The animal instance for which the indoor time percentage is calculated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            - float: The percentage of the day that the animal spends indoors.</span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="n">hours</span> <span class="o">=</span> <span class="mi">24</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">t_indoors</span> <span class="o">+</span> <span class="n">animal</span><span class="o">.</span><span class="n">t_stabled</span><span class="p">)</span> <span class="o">/</span> <span class="n">hours</span></div>


<div class="viewcode-block" id="HousingStage.VS_HOUSED">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.HousingStage.VS_HOUSED">[docs]</a>
    <span class="k">def</span> <span class="nf">VS_HOUSED</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the volatile solids excreted per day for animals during the period they are housed. This measurement is essential for understanding the potential environmental impact of manure produced indoors.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            - animal (object): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            - float: The volatile solids excretion rate (kg/day) when animals are housed.</span>

<span class="sd">        Note:</span>
<span class="sd">            The calculation incorporates the energy from concentrates and grass, digestibility, urinary energy, ash content of manure, and time spent indoors. It provides insight into the potential for nutrient runoff and emissions from stored manure.</span>
<span class="sd">       </span>
<span class="sd">            Volitile Solids Excretion Rate (kg/day -1)</span>
<span class="sd">            GEcon = Gross Energy from Concentrates</span>
<span class="sd">            GEgrass = Gross Energy from grass</span>
<span class="sd">            DE= Percentage of Digestible Energy</span>
<span class="sd">            UE = Urinary Energy</span>
<span class="sd">            ASH = Ash content of manure</span>
<span class="sd">            18.45 = conversion factor for dietary GE per kg of dry matter, MJ kg-1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">DEC</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_concentrate_digestable_energy</span><span class="p">(</span>
            <span class="n">animal</span><span class="o">.</span><span class="n">con_type</span>
        <span class="p">)</span>  <span class="c1"># Digestibility of concentrate</span>
        <span class="n">UE</span> <span class="o">=</span> <span class="mf">0.04</span>
        <span class="n">ASH</span> <span class="o">=</span> <span class="mf">0.08</span>
        <span class="n">DMD</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_forage_digestibility</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">forage</span><span class="p">)</span>
        <span class="n">GEC</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span><span class="o">.</span><span class="n">gross_energy_from_concentrate</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">GEG</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span><span class="o">.</span><span class="n">gross_energy_from_grass</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">IN</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">percent_indoors</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>

        <span class="c1"># The second instance of GEG in part 2 of equation may need to be changed to GEC</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(((</span><span class="n">GEC</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">DEC</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="n">UE</span> <span class="o">*</span> <span class="n">GEC</span><span class="p">))</span> <span class="o">*</span> <span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">ASH</span><span class="p">)</span> <span class="o">/</span> <span class="mf">18.45</span><span class="p">))</span>
            <span class="o">+</span> <span class="p">((</span><span class="n">GEG</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">DMD</span> <span class="o">/</span> <span class="mi">100</span><span class="p">))</span> <span class="o">+</span> <span class="p">(</span><span class="n">UE</span> <span class="o">*</span> <span class="n">GEG</span><span class="p">))</span> <span class="o">*</span> <span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">ASH</span><span class="p">)</span> <span class="o">/</span> <span class="mf">18.45</span><span class="p">))</span>
        <span class="p">)</span> <span class="o">*</span> <span class="n">IN</span></div>



<div class="viewcode-block" id="HousingStage.net_excretion_HOUSED">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.HousingStage.net_excretion_HOUSED">[docs]</a>
    <span class="k">def</span> <span class="nf">net_excretion_HOUSED</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the amount of nitrogen excreted per year by housed animals. </span>

<span class="sd">        Parameters:</span>
<span class="sd">            - animal (object): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            - float: The amount of nitrogen (kg) excreted per year while animals are housed.</span>
<span class="sd">        </span>
<span class="sd">        Note:</span>
<span class="sd">            The higher rate compared to other models may result from using IPCC equations that account for a broader range of energy ratios.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">CP</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_concentrate_crude_protein</span><span class="p">(</span>
            <span class="n">animal</span><span class="o">.</span><span class="n">con_type</span>
        <span class="p">)</span>  <span class="c1"># crude protein percentage (N contained in crude protein), apparently, 16% is the average N content; https://www.feedipedia.org/node/8329</span>
        <span class="n">FCP</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_grass_crude_protein</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">forage</span><span class="p">)</span>
        <span class="n">GEC</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span><span class="o">.</span><span class="n">gross_energy_from_concentrate</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">GEG</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">energy_class</span><span class="o">.</span><span class="n">gross_energy_from_grass</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>

        <span class="n">N_retention_frac</span> <span class="o">=</span> <span class="mf">0.10</span>

        <span class="n">IN</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">percent_indoors</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(((</span><span class="n">GEC</span> <span class="o">*</span> <span class="mi">365</span><span class="p">)</span> <span class="o">/</span> <span class="mf">18.45</span><span class="p">)</span> <span class="o">*</span> <span class="p">((</span><span class="n">CP</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span> <span class="o">/</span> <span class="mf">6.25</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">N_retention_frac</span><span class="p">))</span>
            <span class="o">+</span> <span class="p">((((</span><span class="n">GEG</span> <span class="o">*</span> <span class="mi">365</span><span class="p">)</span> <span class="o">/</span> <span class="mf">18.45</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">FCP</span> <span class="o">/</span> <span class="mf">100.0</span><span class="p">)</span> <span class="o">/</span> <span class="mf">6.25</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">N_retention_frac</span><span class="p">))</span>
        <span class="p">)</span> <span class="o">*</span> <span class="n">IN</span></div>



<div class="viewcode-block" id="HousingStage.total_ammonia_nitrogen_nh4_HOUSED">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.HousingStage.total_ammonia_nitrogen_nh4_HOUSED">[docs]</a>
    <span class="k">def</span> <span class="nf">total_ammonia_nitrogen_nh4_HOUSED</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the total ammonia nitrogen (TAN) produced per year from animals housed. </span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (object): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total amount of ammonia nitrogen (TAN) produced per year, in kilograms.</span>

<span class="sd">        Note:</span>
<span class="sd">            The calculation assumes that TAN constitutes 60% of the total nitrogen excreted (Nex).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">percentage_nex</span> <span class="o">=</span> <span class="mf">0.6</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_excretion_HOUSED</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span> <span class="o">*</span> <span class="n">percentage_nex</span></div>


<div class="viewcode-block" id="HousingStage.nh3_emissions_per_year_HOUSED">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.HousingStage.nh3_emissions_per_year_HOUSED">[docs]</a>
    <span class="k">def</span> <span class="nf">nh3_emissions_per_year_HOUSED</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimates the total ammonia (NH3) emissions per year from housing based on the total ammonia nitrogen (TAN) produced </span>
<span class="sd">        and the specific management system in place.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (object): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total ammonia emissions per year, in kilograms.</span>

<span class="sd">        Note:</span>
<span class="sd">            The method utilizes emission factors from IPCC 2019 guidelines and adjustments from the </span>
<span class="sd">            National Inventory Report (NIR) 2020 to account for the management of sheep manure.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total_ammonia_nitrogen_nh4_HOUSED</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
            <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_storage_TAN</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">mm_storage</span><span class="p">)()</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="HousingStage.HOUSING_N2O_indirect">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.HousingStage.HOUSING_N2O_indirect">[docs]</a>
    <span class="k">def</span> <span class="nf">HOUSING_N2O_indirect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates indirect nitrous oxide (N2O) emissions from housing by considering ammonia (NH3) emissions and their atmospheric deposition.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (object): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Indirect N2O emissions per year, in kilograms.</span>

<span class="sd">        Note:</span>
<span class="sd">            This method uses the emission factor for indirect atmospheric deposition to calculate N2O emissions resulting from the volatilization of NH3 from housed animal manure.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ef</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_indirect_atmospheric_deposition</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="n">indirect_n2o</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nh3_emissions_per_year_HOUSED</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span> <span class="o">*</span> <span class="n">ef</span>

        <span class="k">return</span> <span class="n">indirect_n2o</span></div>
</div>



<div class="viewcode-block" id="StorageStage">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.StorageStage">[docs]</a>
<span class="k">class</span> <span class="nc">StorageStage</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ef_country</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The StorageStage class calculates emissions and nutrient loss from manure storage systems. It provides methods for calculating </span>
<span class="sd">        net nitrogen excretion, ammonia nitrogen production, methane emissions, direct and indirect nitrous oxide emissions from manure storage.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            data_manager_class (LCADataManager): Provides access to necessary data for calculations.</span>
<span class="sd">            housing_class (HousingStage): Allows access to calculations from the housing stage for use in storage calculations.</span>

<span class="sd">        Methods:</span>
<span class="sd">            net_excretion_STORAGE(animal): Calculates net nitrogen excretion from storage.</span>
<span class="sd">            total_ammonia_nitrogen_nh4_STORAGE(animal): Calculates total ammonia nitrogen production in storage.</span>
<span class="sd">            CH4_STORAGE(animal): Estimates methane emissions from manure storage.</span>
<span class="sd">            STORAGE_N2O_direct(animal): Calculates direct nitrous oxide emissions from storage.</span>
<span class="sd">            nh3_emissions_per_year_STORAGE(animal): Estimates annual ammonia emissions from storage.</span>
<span class="sd">            STORAGE_N2O_indirect(animal): Calculates indirect nitrous oxide emissions related to storage.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span> <span class="o">=</span> <span class="n">LCADataManager</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">housing_class</span> <span class="o">=</span> <span class="n">HousingStage</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>

<div class="viewcode-block" id="StorageStage.net_excretion_STORAGE">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.StorageStage.net_excretion_STORAGE">[docs]</a>
    <span class="k">def</span> <span class="nf">net_excretion_STORAGE</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the net nitrogen excretion from storage by accounting for the reduction in nitrogen due to ammonia volatilization from housing.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (object): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Net nitrogen excretion from storage, in kilograms per year.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">housing_class</span><span class="o">.</span><span class="n">net_excretion_HOUSED</span><span class="p">(</span>
            <span class="n">animal</span>
        <span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">housing_class</span><span class="o">.</span><span class="n">nh3_emissions_per_year_HOUSED</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span></div>


<div class="viewcode-block" id="StorageStage.total_ammonia_nitrogen_nh4_STORAGE">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.StorageStage.total_ammonia_nitrogen_nh4_STORAGE">[docs]</a>
    <span class="k">def</span> <span class="nf">total_ammonia_nitrogen_nh4_STORAGE</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the total ammonia nitrogen (TAN) produced per year in storage based on net nitrogen excretion.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (object): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total ammonia nitrogen produced per year in storage, in kilograms.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">percentage_nex</span> <span class="o">=</span> <span class="mf">0.6</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_excretion_STORAGE</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span> <span class="o">*</span> <span class="n">percentage_nex</span></div>


<div class="viewcode-block" id="StorageStage.CH4_STORAGE">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.StorageStage.CH4_STORAGE">[docs]</a>
    <span class="k">def</span> <span class="nf">CH4_STORAGE</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimates the total methane (CH4) emissions per year from manure storage.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (object): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Methane emissions from manure storage per year, in kilograms.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">housing_class</span><span class="o">.</span><span class="n">VS_HOUSED</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span> <span class="o">*</span> <span class="mi">365</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span>
            <span class="mf">0.1</span> <span class="o">*</span> <span class="mf">0.67</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_storage_MCF</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">mm_storage</span><span class="p">)()</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="StorageStage.STORAGE_N2O_direct">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.StorageStage.STORAGE_N2O_direct">[docs]</a>
    <span class="k">def</span> <span class="nf">STORAGE_N2O_direct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the direct nitrous oxide (N2O) emissions from nitrogen in manure storage.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (object): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Direct nitrous oxide emissions from manure storage per year, in kilograms.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_excretion_STORAGE</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_storage_N2O</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">mm_storage</span><span class="p">)()</span></div>



<div class="viewcode-block" id="StorageStage.nh3_emissions_per_year_STORAGE">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.StorageStage.nh3_emissions_per_year_STORAGE">[docs]</a>
    <span class="k">def</span> <span class="nf">nh3_emissions_per_year_STORAGE</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimates annual ammonia (NH3) emissions from manure storage based on total ammonia nitrogen production.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (object): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Ammonia emissions from manure storage per year, in kilograms.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total_ammonia_nitrogen_nh4_STORAGE</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
            <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_storage_TAN</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">mm_storage</span><span class="p">)()</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="StorageStage.STORAGE_N2O_indirect">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.StorageStage.STORAGE_N2O_indirect">[docs]</a>
    <span class="k">def</span> <span class="nf">STORAGE_N2O_indirect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates indirect nitrous oxide (N2O) emissions from atmospheric deposition related to ammonia volatilization in storage.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (object): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Indirect nitrous oxide emissions from storage per year, in kilograms.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">indirect_atmosphere</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_parameter</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">cohort</span><span class="p">,</span> <span class="s2">&quot;atmospheric_deposition&quot;</span><span class="p">)()</span>

        <span class="n">NH3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nh3_emissions_per_year_STORAGE</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">NH3</span> <span class="o">*</span> <span class="n">indirect_atmosphere</span></div>
</div>



<div class="viewcode-block" id="DailySpread">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.DailySpread">[docs]</a>
<span class="k">class</span> <span class="nc">DailySpread</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The DailySpread class focuses on the environmental impact of spreading stored manure on fields, including calculations for net nitrogen </span>
<span class="sd">    excretion, ammonia nitrogen, direct and indirect nitrous oxide emissions, and nitrogen and phosphorus leaching. It&#39;s important to note </span>
<span class="sd">    that while this functionality is provided, solid manure from sheep is often not spread to pasture in Ireland.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        data_manager_class (LCADataManager): Provides access to necessary data for calculations.</span>
<span class="sd">        storage_class (StorageStage): Allows access to calculations from the storage stage for use in spreading calculations.</span>
<span class="sd">    </span>
<span class="sd">    Methods:</span>
<span class="sd">        net_excretion_SPREAD(animal): Calculates the net nitrogen excretion from daily spreading.</span>
<span class="sd">        total_ammonia_nitrogen_nh4_SPREAD(animal): Calculates total ammonia nitrogen from daily spreading.</span>
<span class="sd">        SPREAD_N2O_direct(animal): Estimates direct nitrous oxide emissions from daily spreading.</span>
<span class="sd">        nh3_emissions_per_year_SPREAD(animal): Estimates annual ammonia emissions from daily spreading.</span>
<span class="sd">        leach_nitrogen_SPREAD(animal): Estimates the amount of nitrogen leached from daily spreading.</span>
<span class="sd">        leach_phosphorous_SPREAD(animal): Estimates the amount of phosphorus leached from daily spreading.</span>
<span class="sd">        SPREAD_N2O_indirect(animal): Calculates indirect nitrous oxide emissions from daily spreading.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ef_country</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span> <span class="o">=</span> <span class="n">LCADataManager</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">storage_class</span> <span class="o">=</span> <span class="n">StorageStage</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>

<div class="viewcode-block" id="DailySpread.net_excretion_SPREAD">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.DailySpread.net_excretion_SPREAD">[docs]</a>
    <span class="k">def</span> <span class="nf">net_excretion_SPREAD</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the net nitrogen excretion from spreading, accounting for nitrogen loss in storage and emissions.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (object): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Net nitrogen excretion from daily spreading, in kilograms per year.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nex_storage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_excretion_STORAGE</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">direct_n2o</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">STORAGE_N2O_direct</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">nh3_emissions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nh3_emissions_per_year_STORAGE</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">indirect_n2o</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">STORAGE_N2O_indirect</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">nex_storage</span> <span class="o">-</span> <span class="n">direct_n2o</span> <span class="o">-</span> <span class="n">nh3_emissions</span> <span class="o">-</span> <span class="n">indirect_n2o</span></div>


<div class="viewcode-block" id="DailySpread.total_ammonia_nitrogen_nh4_SPREAD">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.DailySpread.total_ammonia_nitrogen_nh4_SPREAD">[docs]</a>
    <span class="k">def</span> <span class="nf">total_ammonia_nitrogen_nh4_SPREAD</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the total ammonia nitrogen (TAN) produced from daily spreading.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (object): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total ammonia nitrogen produced from daily spreading, in kilograms per year.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">percentage_nex</span> <span class="o">=</span> <span class="mf">0.6</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_excretion_SPREAD</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span> <span class="o">*</span> <span class="n">percentage_nex</span></div>



<div class="viewcode-block" id="DailySpread.SPREAD_N2O_direct">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.DailySpread.SPREAD_N2O_direct">[docs]</a>
    <span class="k">def</span> <span class="nf">SPREAD_N2O_direct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimates the direct nitrous oxide (N2O) emissions from daily spreading.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (object): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Direct nitrous oxide emissions from daily spreading, in kilograms per year.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_excretion_SPREAD</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_parameter</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">cohort</span><span class="p">,</span> <span class="s2">&quot;direct_soil_n2o&quot;</span><span class="p">)()</span></div>



<div class="viewcode-block" id="DailySpread.nh3_emissions_per_year_SPREAD">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.DailySpread.nh3_emissions_per_year_SPREAD">[docs]</a>
    <span class="k">def</span> <span class="nf">nh3_emissions_per_year_SPREAD</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimates annual ammonia (NH3) emissions from daily spreading.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (object): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Ammonia emissions from daily spreading, in kilograms per year.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nh4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_ammonia_nitrogen_nh4_SPREAD</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">nh4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_daily_spreading</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">daily_spreading</span><span class="p">)()</span></div>


<div class="viewcode-block" id="DailySpread.leach_nitrogen_SPREAD">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.DailySpread.leach_nitrogen_SPREAD">[docs]</a>
    <span class="k">def</span> <span class="nf">leach_nitrogen_SPREAD</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimates the amount of nitrogen leached due to daily spreading.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (object): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Nitrogen leached from daily spreading, in kilograms per year.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ten_percent_nex</span> <span class="o">=</span> <span class="mf">0.1</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">net_excretion_SPREAD</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span> <span class="o">*</span> <span class="n">ten_percent_nex</span></div>


<div class="viewcode-block" id="DailySpread.leach_phospherous_SPREAD">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.DailySpread.leach_phospherous_SPREAD">[docs]</a>
    <span class="k">def</span> <span class="nf">leach_phospherous_SPREAD</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimates the amount of phosphorus leached due to daily spreading.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (object): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Phosphorus leached from daily spreading, in kilograms per year.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">net_excretion_SPREAD</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.8</span> <span class="o">/</span> <span class="mi">5</span><span class="p">))</span> <span class="o">*</span> <span class="mf">0.03</span></div>


<div class="viewcode-block" id="DailySpread.SPREAD_N2O_indirect">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.DailySpread.SPREAD_N2O_indirect">[docs]</a>
    <span class="k">def</span> <span class="nf">SPREAD_N2O_indirect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates indirect nitrous oxide (N2O) emissions from atmospheric deposition and leaching related to daily spreading.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (object): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Indirect nitrous oxide emissions from daily spreading, in kilograms per year.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">indirect_atmosphere</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_parameter</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">cohort</span><span class="p">,</span> <span class="s2">&quot;atmospheric_deposition&quot;</span><span class="p">)()</span>
        <span class="n">indirect_leaching</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_parameter</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">cohort</span><span class="p">,</span> <span class="s2">&quot;leaching&quot;</span><span class="p">)()</span>

        <span class="n">NH3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nh3_emissions_per_year_SPREAD</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="n">NL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">leach_nitrogen_SPREAD</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">NH3</span> <span class="o">*</span> <span class="n">indirect_atmosphere</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">NL</span> <span class="o">*</span> <span class="n">indirect_leaching</span><span class="p">)</span></div>
</div>



<span class="c1">###############################################################################</span>
<span class="c1"># Farm &amp; Upstream Emissions</span>
<span class="c1">###############################################################################</span>
<div class="viewcode-block" id="FertiliserInputs">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.FertiliserInputs">[docs]</a>
<span class="k">class</span> <span class="nc">FertiliserInputs</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the calculations related to the environmental impact of fertiliser inputs, including urea and ammonium nitrate fertilisers. </span>
<span class="sd">    It calculates direct and indirect nitrous oxide emissions, ammonia volatilisation, leaching, and carbon dioxide emissions from the </span>
<span class="sd">    application of fertilisers and lime.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        data_manager_class (LCADataManager): Provides access to necessary data for calculations.</span>
<span class="sd">    </span>
<span class="sd">    Methods:</span>
<span class="sd">        urea_N2O_direct: Calculates direct N2O emissions from urea application.</span>
<span class="sd">        urea_NH3: Estimates ammonia volatilised from urea application.</span>
<span class="sd">        urea_nleach: Calculates nitrogen leached from urea application.</span>
<span class="sd">        urea_N2O_indirect: Calculates indirect N2O emissions from urea application.</span>
<span class="sd">        urea_co2: Estimates CO2 emissions from urea application.</span>
<span class="sd">        lime_co2: Estimates CO2 emissions from lime application.</span>
<span class="sd">        urea_P_leach: Calculates phosphorus leached from urea application.</span>
<span class="sd">        n_fertiliser_P_leach: Calculates phosphorus leached from nitrogen fertiliser application.</span>
<span class="sd">        n_fertiliser_direct: Calculates direct N2O emissions from ammonium nitrate fertiliser application.</span>
<span class="sd">        n_fertiliser_NH3: Estimates ammonia volatilised from ammonium nitrate fertiliser application.</span>
<span class="sd">        n_fertiliser_nleach: Calculates nitrogen leached from ammonium nitrate fertiliser application.</span>
<span class="sd">        n_fertiliser_indirect: Calculates indirect N2O emissions from ammonium nitrate fertiliser application.</span>
<span class="sd">        p_fertiliser_P_leach: Calculates phosphorus leached from phosphorus fertiliser application.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ef_country</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span> <span class="o">=</span> <span class="n">LCADataManager</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>

    <span class="c1"># Urea Fertiliser</span>
<div class="viewcode-block" id="FertiliserInputs.urea_N2O_direct">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.FertiliserInputs.urea_N2O_direct">[docs]</a>
    <span class="k">def</span> <span class="nf">urea_N2O_direct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the direct N2O emissions from the application of urea and urea treated with nitrification inhibitors (abated urea) to soils.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            total_urea (float): The total amount of urea applied, in kilograms.</span>
<span class="sd">            total_urea_abated (float): The total amount of abated urea applied, in kilograms.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total direct N2O emissions from urea and abated urea application, in kilograms.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ef_urea</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_ef_urea</span><span class="p">()</span>
        <span class="n">ef_urea_abated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_ef_urea_abated</span><span class="p">()</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">total_urea</span> <span class="o">*</span> <span class="n">ef_urea</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">total_urea_abated</span> <span class="o">*</span> <span class="n">ef_urea_abated</span><span class="p">)</span></div>


<div class="viewcode-block" id="FertiliserInputs.urea_NH3">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.FertiliserInputs.urea_NH3">[docs]</a>
    <span class="k">def</span> <span class="nf">urea_NH3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Estimates the amount of NH3 volatilized from both standard and abated urea applications.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            total_urea (float): Total amount of urea applied (kg).</span>
<span class="sd">            total_urea_abated (float): Total amount of abated urea applied (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total NH3 emissions (kg).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ef_urea</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_ef_urea_to_nh3_and_nox</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="n">ef_urea_abated</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_ef_urea_abated_to_nh3_and_nox</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">total_urea</span> <span class="o">*</span> <span class="n">ef_urea</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">total_urea_abated</span> <span class="o">*</span> <span class="n">ef_urea_abated</span><span class="p">)</span></div>


<div class="viewcode-block" id="FertiliserInputs.urea_nleach">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.FertiliserInputs.urea_nleach">[docs]</a>
    <span class="k">def</span> <span class="nf">urea_nleach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the amount of urea and abated urea leached from soils after application.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            total_urea (float): Total amount of urea applied (kg).</span>
<span class="sd">            total_urea_abated (float): Total amount of abated urea applied (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total leached urea (kg).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">leach</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_ef_fration_leach_runoff</span><span class="p">()</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">total_urea</span> <span class="o">+</span> <span class="n">total_urea_abated</span><span class="p">)</span> <span class="o">*</span> <span class="n">leach</span></div>


<div class="viewcode-block" id="FertiliserInputs.urea_N2O_indirect">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.FertiliserInputs.urea_N2O_indirect">[docs]</a>
    <span class="k">def</span> <span class="nf">urea_N2O_indirect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates indirect emissions from urea and abated urea application, considering atmospheric deposition and leaching.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            total_urea (float): Total amount of urea applied (kg).</span>
<span class="sd">            total_urea_abated (float): Total amount of abated urea applied (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total indirect N2O emissions (kg).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">indirect_atmosphere</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_indirect_atmospheric_deposition</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="n">indirect_leaching</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_indirect_leaching</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">urea_NH3</span><span class="p">(</span><span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">)</span> <span class="o">*</span> <span class="n">indirect_atmosphere</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">urea_nleach</span><span class="p">(</span><span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">)</span> <span class="o">*</span> <span class="n">indirect_leaching</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="FertiliserInputs.urea_co2">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.FertiliserInputs.urea_co2">[docs]</a>
    <span class="k">def</span> <span class="nf">urea_co2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total_urea</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the total CO2 emissions resulting from the application of urea.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            total_urea (float): Total amount of urea applied (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total CO2 emissions (kg).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ef_urea_co2</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_ef_urea_co2</span><span class="p">())</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">total_urea</span>  <span class="o">*</span> <span class="n">ef_urea_co2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span>
            <span class="mi">44</span> <span class="o">/</span> <span class="mi">12</span>
        <span class="p">)</span>  <span class="c1"># adjusted to the NIR version of this calculation</span></div>



<div class="viewcode-block" id="FertiliserInputs.lime_co2">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.FertiliserInputs.lime_co2">[docs]</a>
    <span class="k">def</span> <span class="nf">lime_co2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total_lime</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total CO2 emissions from the application of lime.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            total_lime (float): Total amount of lime applied (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total CO2 emissions from lime application (kg).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ef_lime_co2</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_ef_lime_co2</span><span class="p">())</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">total_lime</span> <span class="o">*</span> <span class="n">ef_lime_co2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span>
            <span class="mi">44</span> <span class="o">/</span> <span class="mi">12</span>
        <span class="p">)</span>  <span class="c1"># adjusted to the NIR version of this calculation</span></div>



<div class="viewcode-block" id="FertiliserInputs.urea_P_leach">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.FertiliserInputs.urea_P_leach">[docs]</a>
    <span class="k">def</span> <span class="nf">urea_P_leach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the amount of phosphorus leached from urea and abated urea application.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            total_urea (float): Total amount of urea applied (kg).</span>
<span class="sd">            total_urea_abated (float): Total amount of abated urea applied (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total phosphorus leached (kg).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">frac_leach</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_frac_p_leach</span><span class="p">())</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">total_urea</span> <span class="o">+</span> <span class="n">total_urea_abated</span><span class="p">)</span> <span class="o">*</span> <span class="n">frac_leach</span></div>


    <span class="c1"># Nitrogen Fertiliser Emissions</span>

<div class="viewcode-block" id="FertiliserInputs.n_fertiliser_P_leach">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.FertiliserInputs.n_fertiliser_P_leach">[docs]</a>
    <span class="k">def</span> <span class="nf">n_fertiliser_P_leach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total_n_fert</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the amount of phosphorus leached due to the application of nitrogen fertilisers.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            total_n_fert (float): Total amount of nitrogen fertiliser applied (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total phosphorus leached due to nitrogen fertiliser application (kg).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">frac_leach</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_frac_p_leach</span><span class="p">())</span>

        <span class="k">return</span> <span class="n">total_n_fert</span> <span class="o">*</span> <span class="n">frac_leach</span></div>


<div class="viewcode-block" id="FertiliserInputs.n_fertiliser_direct">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.FertiliserInputs.n_fertiliser_direct">[docs]</a>
    <span class="k">def</span> <span class="nf">n_fertiliser_direct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total_n_fert</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates direct N2O emissions resulting from the application of nitrogen fertilisers at field level.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            total_n_fert (float): Total amount of nitrogen fertiliser applied (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total direct N2O emissions from nitrogen fertiliser application (kg).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ef</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_ef_AN_fertiliser</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">total_n_fert</span> <span class="o">*</span> <span class="n">ef</span></div>


<div class="viewcode-block" id="FertiliserInputs.n_fertiliser_NH3">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.FertiliserInputs.n_fertiliser_NH3">[docs]</a>
    <span class="k">def</span> <span class="nf">n_fertiliser_NH3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total_n_fert</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total NH3 emissions resulting from the application of nitrogen fertilisers at field level.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            total_n_fert (float): Total amount of nitrogen fertiliser applied (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total NH3 emissions from nitrogen fertiliser application (kg).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ef</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_ef_AN_fertiliser_to_nh3_and_nox</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">total_n_fert</span> <span class="o">*</span> <span class="n">ef</span></div>


<div class="viewcode-block" id="FertiliserInputs.n_fertiliser_nleach">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.FertiliserInputs.n_fertiliser_nleach">[docs]</a>
    <span class="k">def</span> <span class="nf">n_fertiliser_nleach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total_n_fert</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the total nitrogen leached from the application of nitrogen fertilisers at field level.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            total_n_fert (float): Total amount of nitrogen fertiliser applied (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total nitrogen leached from nitrogen fertiliser application (kg).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ef</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_ef_fration_leach_runoff</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">total_n_fert</span> <span class="o">*</span> <span class="n">ef</span></div>


<div class="viewcode-block" id="FertiliserInputs.n_fertiliser_indirect">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.FertiliserInputs.n_fertiliser_indirect">[docs]</a>
    <span class="k">def</span> <span class="nf">n_fertiliser_indirect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total_n_fert</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the indirect N2O emissions from the use of nitrogen fertilisers, accounting for atmospheric deposition and leaching.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            total_n_fert (float): Total amount of nitrogen fertiliser applied (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total indirect N2O emissions from nitrogen fertiliser application (kg).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">indirect_atmosphere</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_indirect_atmospheric_deposition</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="n">indirect_leaching</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_indirect_leaching</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n_fertiliser_NH3</span><span class="p">(</span><span class="n">total_n_fert</span><span class="p">)</span> <span class="o">*</span> <span class="n">indirect_atmosphere</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n_fertiliser_nleach</span><span class="p">(</span><span class="n">total_n_fert</span><span class="p">)</span> <span class="o">*</span> <span class="n">indirect_leaching</span>
        <span class="p">)</span></div>

    

<div class="viewcode-block" id="FertiliserInputs.total_fertiliser_N20">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.FertiliserInputs.total_fertiliser_N20">[docs]</a>
    <span class="k">def</span> <span class="nf">total_fertiliser_N20</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">,</span> <span class="n">total_n_fert</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the total N2O emissions, both direct and indirect, from the application of both urea and ammonium nitrate fertilisers.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            total_urea (float): Total amount of urea applied (kg).</span>
<span class="sd">            total_urea_abated (float): Total amount of abated urea applied (kg).</span>
<span class="sd">            total_n_fert (float): Total amount of nitrogen fertiliser applied (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total N2O emissions from all fertiliser applications (kg).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">urea_N2O_direct</span><span class="p">(</span><span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">urea_N2O_indirect</span><span class="p">(</span><span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">)</span>
        <span class="p">)</span> <span class="o">+</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n_fertiliser_direct</span><span class="p">(</span><span class="n">total_n_fert</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_fertiliser_indirect</span><span class="p">(</span><span class="n">total_n_fert</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span></div>

    

<div class="viewcode-block" id="FertiliserInputs.p_fertiliser_P_leach">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.FertiliserInputs.p_fertiliser_P_leach">[docs]</a>
    <span class="k">def</span> <span class="nf">p_fertiliser_P_leach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total_p_fert</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the amount of phosphorus leached due to the application of phosphorus fertilisers.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            total_p_fert (float): Total amount of phosphorus fertiliser applied (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total phosphorus leached from phosphorus fertiliser application (kg).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">frac_leach</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_frac_p_leach</span><span class="p">())</span>

        <span class="k">return</span> <span class="n">total_p_fert</span> <span class="o">*</span> <span class="n">frac_leach</span></div>
</div>



<span class="c1">################################################################################</span>
<span class="c1"># Total Global Warming Potential of whole farms (Upstream Processes &amp; Fossil Fuel Energy)</span>
<span class="c1">################################################################################</span>

<span class="c1"># Emissions from on Farm Fossil Fuels</span>


<div class="viewcode-block" id="Upstream">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Upstream">[docs]</a>
<span class="k">class</span> <span class="nc">Upstream</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the calculation of upstream emissions related to concentrate production, diesel usage, and electricity consumption </span>
<span class="sd">    for the environmental impact assessment of sheep farming operations. It focuses on CO2 and PO4 emissions from various </span>
<span class="sd">    sources including fertiliser production, diesel fuel, and electricity used in farm operations.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        data_manager_class (LCADataManager): Provides access to necessary data for calculations.</span>

<span class="sd">    Methods:</span>
<span class="sd">        co2_from_concentrate_production: Calculates CO2 emissions from concentrate production for sheep.</span>
<span class="sd">        po4_from_concentrate_production: Calculates PO4 emissions from concentrate production for sheep.</span>
<span class="sd">        diesel_CO2: Estimates CO2 emissions from diesel fuel usage.</span>
<span class="sd">        diesel_PO4: Estimates PO4 emissions from diesel fuel usage.</span>
<span class="sd">        elec_CO2: Calculates CO2 emissions from electricity consumption.</span>
<span class="sd">        elec_PO4: Calculates PO4 emissions from electricity consumption.</span>
<span class="sd">        fert_upstream_CO2: Estimates CO2 emissions from the production of various fertilisers.</span>
<span class="sd">        fert_upstream_EP: Estimates PO4 emissions from the production of various fertilisers.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ef_country</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span> <span class="o">=</span> <span class="n">LCADataManager</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>

<div class="viewcode-block" id="Upstream.co2_from_concentrate_production">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Upstream.co2_from_concentrate_production">[docs]</a>
    <span class="k">def</span> <span class="nf">co2_from_concentrate_production</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates CO2e emissions from the production of concentrates consumed by the animal cohorts.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (object): An object containing data about different animal cohorts and their concentrate consumption.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The total CO2e emissions from concentrate production for all animal cohorts (kg/year).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">concentrate_co2</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">animal</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_keys</span><span class="p">()</span>
                <span class="ow">and</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="p">):</span>
                <span class="n">concentrate_co2</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">con_amount</span>
                    <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_upstream_concentrate_co2e</span><span class="p">(</span>
                        <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">con_type</span>
                    <span class="p">)</span>
                <span class="p">)</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span>

        <span class="k">return</span> <span class="n">concentrate_co2</span> <span class="o">*</span> <span class="mi">365</span></div>



        <span class="c1"># Imported Feeds</span>
<div class="viewcode-block" id="Upstream.po4_from_concentrate_production">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Upstream.po4_from_concentrate_production">[docs]</a>
    <span class="k">def</span> <span class="nf">po4_from_concentrate_production</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates phosphorus (PO4e) emissions from the production of concentrates consumed by the animal cohorts.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (object): An object containing data about different animal cohorts and their concentrate consumption.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The total PO4e emissions from concentrate production for all animal cohorts (kg/year).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">concentrate_p</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">animal</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_keys</span><span class="p">()</span>
                <span class="ow">and</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="p">):</span>
                <span class="n">concentrate_p</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">con_amount</span>
                    <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_upstream_concentrate_po4e</span><span class="p">(</span>
                        <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">con_type</span>
                    <span class="p">)</span>
                <span class="p">)</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span>

        <span class="k">return</span> <span class="n">concentrate_p</span> <span class="o">*</span> <span class="mi">365</span></div>



<div class="viewcode-block" id="Upstream.diesel_CO2">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Upstream.diesel_CO2">[docs]</a>
    <span class="k">def</span> <span class="nf">diesel_CO2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">diesel_kg</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates CO2e emissions from diesel consumption, including both direct and indirect upstream emissions.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            diesel_kg (float): The amount of diesel consumed (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The total CO2e emissions from diesel consumption (kg).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Diesel_indir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_upstream_diesel_co2e_indirect</span><span class="p">()</span>
        <span class="n">Diest_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_upstream_diesel_co2e_direct</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">diesel_kg</span> <span class="o">*</span> <span class="p">(</span><span class="n">Diest_dir</span> <span class="o">+</span> <span class="n">Diesel_indir</span><span class="p">)</span></div>

    

<div class="viewcode-block" id="Upstream.diesel_PO4">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Upstream.diesel_PO4">[docs]</a>
    <span class="k">def</span> <span class="nf">diesel_PO4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">diesel_kg</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates phosphorus (PO4e) emissions from diesel consumption, including both direct and indirect upstream emissions.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            diesel_kg (float): The amount of diesel consumed (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The total PO4e emissions from diesel consumption (kg).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Diesel_indir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_upstream_diesel_po4e_indirect</span><span class="p">()</span>
        <span class="n">Diest_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_upstream_diesel_po4e_direct</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">diesel_kg</span> <span class="o">*</span> <span class="p">(</span><span class="n">Diest_dir</span> <span class="o">+</span> <span class="n">Diesel_indir</span><span class="p">)</span></div>


<div class="viewcode-block" id="Upstream.elec_CO2">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Upstream.elec_CO2">[docs]</a>
    <span class="k">def</span> <span class="nf">elec_CO2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elec_kwh</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates CO2e emissions from electricity consumption.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            elec_kwh (float): The amount of electricity consumed (kWh).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The total CO2e emissions from electricity consumption (kg).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">elec_consumption</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_upstream_electricity_co2e</span><span class="p">()</span> <span class="c1"># based on Norway hydropower</span>
        <span class="k">return</span> <span class="n">elec_kwh</span> <span class="o">*</span> <span class="n">elec_consumption</span></div>



<div class="viewcode-block" id="Upstream.elec_PO4">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Upstream.elec_PO4">[docs]</a>
    <span class="k">def</span> <span class="nf">elec_PO4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elec_kwh</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates phosphorus emissions (PO4e) from electricity consumption.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            elec_kwh (float): The amount of electricity consumed (kWh).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The total PO4e emissions from electricity consumption (kg).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">elec_consumption</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_upstream_electricity_po4e</span><span class="p">()</span> <span class="c1"># based on Norway hydropower</span>
        <span class="k">return</span> <span class="n">elec_kwh</span> <span class="o">*</span> <span class="n">elec_consumption</span></div>

    

    <span class="c1"># Emissions from upstream fertiliser production</span>
<div class="viewcode-block" id="Upstream.fert_upstream_CO2">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Upstream.fert_upstream_CO2">[docs]</a>
    <span class="k">def</span> <span class="nf">fert_upstream_CO2</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">total_n_fert</span><span class="p">,</span> <span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">,</span> <span class="n">total_p_fert</span><span class="p">,</span> <span class="n">total_k_fert</span><span class="p">,</span> <span class="n">total_lime_fert</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the total upstream CO2e emissions from the production of various fertilizers.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            total_n_fert (float): Total nitrogen fertilizer applied (kg).</span>
<span class="sd">            total_urea (float): Total urea applied (kg).</span>
<span class="sd">            total_urea_abated (float): Total abated urea applied (kg).</span>
<span class="sd">            total_p_fert (float): Total phosphorus fertilizer applied (kg).</span>
<span class="sd">            total_k_fert (float): Total potassium fertilizer applied (kg).</span>
<span class="sd">            total_lime_fert (float): Total lime fertilizer applied (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The total upstream CO2e emissions from fertilizer production (kg).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">AN_fert_CO2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_upstream_AN_fertiliser_co2e</span><span class="p">()</span> <span class="c1"># Ammonium Nitrate Fertiliser</span>
        <span class="n">Urea_fert_CO2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_upstream_urea_fertiliser_co2e</span><span class="p">()</span>
        <span class="n">Triple_superphosphate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_upstream_triple_phosphate_co2e</span><span class="p">()</span>
        <span class="n">Potassium_chloride</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_upstream_potassium_chloride_co2e</span><span class="p">()</span>
        <span class="n">Lime</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_upstream_lime_co2e</span><span class="p">()</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">total_n_fert</span> <span class="o">*</span> <span class="n">AN_fert_CO2</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">total_urea</span> <span class="o">*</span> <span class="n">Urea_fert_CO2</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">total_urea_abated</span> <span class="o">*</span> <span class="n">Urea_fert_CO2</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">total_p_fert</span> <span class="o">*</span> <span class="n">Triple_superphosphate</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">total_k_fert</span> <span class="o">*</span> <span class="n">Potassium_chloride</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">total_lime_fert</span> <span class="o">*</span> <span class="n">Lime</span><span class="p">)</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="Upstream.fert_upstream_EP">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Upstream.fert_upstream_EP">[docs]</a>
    <span class="k">def</span> <span class="nf">fert_upstream_EP</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">total_n_fert</span><span class="p">,</span> <span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">,</span> <span class="n">total_p_fert</span><span class="p">,</span> <span class="n">total_k_fert</span><span class="p">,</span> <span class="n">total_lime_fert</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the total upstream emissions (PO4e) from the production of various fertilizers.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            total_n_fert (float): Total nitrogen fertilizer applied (kg).</span>
<span class="sd">            total_urea (float): Total urea applied (kg).</span>
<span class="sd">            total_urea_abated (float): Total abated urea applied (kg).</span>
<span class="sd">            total_p_fert (float): Total phosphorus fertilizer applied (kg).</span>
<span class="sd">            total_k_fert (float): Total potassium fertilizer applied (kg).</span>
<span class="sd">            total_lime_fert (float): Total lime fertilizer applied (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The total upstream emissions (PO4e) from fertilizer production (kg).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">AN_fert_PO4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_upstream_AN_fertiliser_po4e</span><span class="p">()</span><span class="c1"># Ammonium Nitrate Fertiliser</span>
        <span class="n">Urea_fert_PO4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_upstream_urea_fertiliser_po4e</span><span class="p">()</span>
        <span class="n">Triple_superphosphate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_upstream_triple_phosphate_po4e</span><span class="p">()</span>
        <span class="n">Potassium_chloride</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_upstream_potassium_chloride_po4e</span><span class="p">()</span>
        <span class="n">Lime</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_upstream_lime_po4e</span><span class="p">()</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">total_n_fert</span> <span class="o">*</span> <span class="n">AN_fert_PO4</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">total_urea</span> <span class="o">*</span> <span class="n">Urea_fert_PO4</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">total_urea_abated</span> <span class="o">*</span> <span class="n">Urea_fert_PO4</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">total_p_fert</span> <span class="o">*</span> <span class="n">Triple_superphosphate</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">total_k_fert</span> <span class="o">*</span> <span class="n">Potassium_chloride</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">total_lime_fert</span> <span class="o">*</span> <span class="n">Lime</span><span class="p">)</span>
        <span class="p">)</span></div>
</div>



<span class="c1">################################################################################</span>
<span class="c1"># Allocation</span>
<span class="c1">################################################################################</span>
<div class="viewcode-block" id="Allocation">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Allocation">[docs]</a>
<span class="k">class</span> <span class="nc">Allocation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Allocation class is designed to compute the economic value of outputs from sheep farming activities, including the value</span>
<span class="sd">    derived from lambs, sheep, and wool. It calculates the economic allocation factors for these outputs.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        None explicitly defined within the class but requires animal objects with specific attributes for calculations.</span>

<span class="sd">    Methods:</span>
<span class="sd">        lamb_live_weight_output_value: Calculates the total economic value from the sale of lambs based on their live weight and sale price.</span>
<span class="sd">        sheep_live_weight_output_value: Calculates the total economic value from the sale of adult sheep based on their live weight and sale price.</span>
<span class="sd">        wool_output_value: Computes the total economic value from wool production.</span>
<span class="sd">        live_weight_bought: Calculates the total live weight of sheep and lambs bought.</span>
<span class="sd">        total_lamb_live_weight_kg: Sums up the total live weight of all lambs.</span>
<span class="sd">        total_sheep_live_weight_kg: Sums up the total live weight of all adult sheep.</span>
<span class="sd">        total_wool_weight_kg: Calculates the total weight of wool produced.</span>
<span class="sd">        lamb_allocation_factor: Determines the proportion of economic value attributed to lambs relative to total output value.</span>
<span class="sd">        sheep_allocation_factor: Determines the proportion of economic value attributed to adult sheep relative to total output value.</span>
<span class="sd">        wool_allocation_factor: Determines the proportion of economic value attributed to wool relative to total output value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="Allocation.lamb_live_weight_output_value">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Allocation.lamb_live_weight_output_value">[docs]</a>
    <span class="k">def</span> <span class="nf">lamb_live_weight_output_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the economic value of lambs based on their live weight and the market price per kilogram.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (Animal): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total economic value from the sale of lambs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(</span>
                <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">lamb_less_1_yr</span><span class="o">.</span><span class="n">weight</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">lamb_less_1_yr</span><span class="o">.</span><span class="n">n_sold</span><span class="p">)</span>
                <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">lamb_less_1_yr</span><span class="o">.</span><span class="n">meat_price_kg</span>
            <span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span>
                <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">lamb_more_1_yr</span><span class="o">.</span><span class="n">weight</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">lamb_more_1_yr</span><span class="o">.</span><span class="n">n_sold</span><span class="p">)</span>
                <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">lamb_more_1_yr</span><span class="o">.</span><span class="n">meat_price_kg</span>
            <span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span>
                <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">male_less_1_yr</span><span class="o">.</span><span class="n">weight</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">male_less_1_yr</span><span class="o">.</span><span class="n">n_sold</span><span class="p">)</span>
                <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">male_less_1_yr</span><span class="o">.</span><span class="n">meat_price_kg</span>
            <span class="p">)</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="Allocation.sheep_live_weight_output_value">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Allocation.sheep_live_weight_output_value">[docs]</a>
    <span class="k">def</span> <span class="nf">sheep_live_weight_output_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the economic value generated of adult sheep (ewes and rams) based on their live weight and the market price per kilogram.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (Animal): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total economic value from the sale of adult sheep.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">ewes</span><span class="o">.</span><span class="n">weight</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">ewes</span><span class="o">.</span><span class="n">n_sold</span><span class="p">)</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">ewes</span><span class="o">.</span><span class="n">meat_price_kg</span>
        <span class="p">)</span> <span class="o">+</span> <span class="p">((</span><span class="n">animal</span><span class="o">.</span><span class="n">ram</span><span class="o">.</span><span class="n">weight</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">ram</span><span class="o">.</span><span class="n">n_sold</span><span class="p">)</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">ram</span><span class="o">.</span><span class="n">meat_price_kg</span><span class="p">)</span></div>


<div class="viewcode-block" id="Allocation.wool_output_value">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Allocation.wool_output_value">[docs]</a>
    <span class="k">def</span> <span class="nf">wool_output_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes the total economic value derived from wool based on the quantity of wool produced and the market price per kilogram.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (Animal): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total economic value from wool production.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(</span>
                <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">lamb_less_1_yr</span><span class="o">.</span><span class="n">wool</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">lamb_less_1_yr</span><span class="o">.</span><span class="n">wool_price_kg</span><span class="p">)</span>
                <span class="o">*</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">lamb_less_1_yr</span><span class="o">.</span><span class="n">pop</span> <span class="o">-</span> <span class="n">animal</span><span class="o">.</span><span class="n">lamb_less_1_yr</span><span class="o">.</span><span class="n">n_sold</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span>
                <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">lamb_more_1_yr</span><span class="o">.</span><span class="n">wool</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">lamb_more_1_yr</span><span class="o">.</span><span class="n">wool_price_kg</span><span class="p">)</span>
                <span class="o">*</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">lamb_more_1_yr</span><span class="o">.</span><span class="n">pop</span> <span class="o">-</span> <span class="n">animal</span><span class="o">.</span><span class="n">lamb_more_1_yr</span><span class="o">.</span><span class="n">n_sold</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span>
                <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">male_less_1_yr</span><span class="o">.</span><span class="n">wool</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">male_less_1_yr</span><span class="o">.</span><span class="n">wool_price_kg</span><span class="p">)</span>
                <span class="o">*</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">male_less_1_yr</span><span class="o">.</span><span class="n">pop</span> <span class="o">-</span> <span class="n">animal</span><span class="o">.</span><span class="n">male_less_1_yr</span><span class="o">.</span><span class="n">n_sold</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span>
                <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">ewes</span><span class="o">.</span><span class="n">wool</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">ewes</span><span class="o">.</span><span class="n">wool_price_kg</span><span class="p">)</span>
                <span class="o">*</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">ewes</span><span class="o">.</span><span class="n">pop</span> <span class="o">-</span> <span class="n">animal</span><span class="o">.</span><span class="n">ewes</span><span class="o">.</span><span class="n">n_sold</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span>
                <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">ram</span><span class="o">.</span><span class="n">wool</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">ram</span><span class="o">.</span><span class="n">wool_price_kg</span><span class="p">)</span>
                <span class="o">*</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">ram</span><span class="o">.</span><span class="n">pop</span> <span class="o">-</span> <span class="n">animal</span><span class="o">.</span><span class="n">ram</span><span class="o">.</span><span class="n">n_sold</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="Allocation.live_weight_bought">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Allocation.live_weight_bought">[docs]</a>
    <span class="k">def</span> <span class="nf">live_weight_bought</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the total live weight of sheep and lambs bought.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (Animal): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total live weight of sheep and lambs bought, in kilograms.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">ewes</span><span class="o">.</span><span class="n">weight</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">ewes</span><span class="o">.</span><span class="n">n_bought</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">lamb_less_1_yr</span><span class="o">.</span><span class="n">weight</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">lamb_less_1_yr</span><span class="o">.</span><span class="n">n_bought</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">lamb_more_1_yr</span><span class="o">.</span><span class="n">weight</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">lamb_more_1_yr</span><span class="o">.</span><span class="n">n_bought</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">male_less_1_yr</span><span class="o">.</span><span class="n">weight</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">male_less_1_yr</span><span class="o">.</span><span class="n">n_bought</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">ram</span><span class="o">.</span><span class="n">weight</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">ram</span><span class="o">.</span><span class="n">n_bought</span><span class="p">)</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="Allocation.total_lamb_live_weight_kg">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Allocation.total_lamb_live_weight_kg">[docs]</a>
    <span class="k">def</span> <span class="nf">total_lamb_live_weight_kg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Summarizes the total live weight of all lambs.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (Animal): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total live weight of lambs, in kilograms.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">lamb_less_1_yr</span><span class="o">.</span><span class="n">weight</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">lamb_less_1_yr</span><span class="o">.</span><span class="n">n_sold</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">lamb_more_1_yr</span><span class="o">.</span><span class="n">weight</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">lamb_more_1_yr</span><span class="o">.</span><span class="n">n_sold</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">male_less_1_yr</span><span class="o">.</span><span class="n">weight</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">male_less_1_yr</span><span class="o">.</span><span class="n">n_sold</span><span class="p">)</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="Allocation.total_sheep_live_weight_kg">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Allocation.total_sheep_live_weight_kg">[docs]</a>
    <span class="k">def</span> <span class="nf">total_sheep_live_weight_kg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes the total live weight of adult sheep.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (Animal): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total live weight of adult sheep, in kilograms.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">ewes</span><span class="o">.</span><span class="n">weight</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">ewes</span><span class="o">.</span><span class="n">n_sold</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span>
            <span class="n">animal</span><span class="o">.</span><span class="n">ram</span><span class="o">.</span><span class="n">weight</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="n">ram</span><span class="o">.</span><span class="n">n_sold</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="Allocation.total_wool_weight_kg">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Allocation.total_wool_weight_kg">[docs]</a>
    <span class="k">def</span> <span class="nf">total_wool_weight_kg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the total weight of wool produced.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (Animal): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total weight of wool produced, in kilograms.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(</span>
                <span class="n">animal</span><span class="o">.</span><span class="n">lamb_less_1_yr</span><span class="o">.</span><span class="n">wool</span>
                <span class="o">*</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">lamb_less_1_yr</span><span class="o">.</span><span class="n">pop</span> <span class="o">-</span> <span class="n">animal</span><span class="o">.</span><span class="n">lamb_less_1_yr</span><span class="o">.</span><span class="n">n_sold</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span>
                <span class="n">animal</span><span class="o">.</span><span class="n">lamb_more_1_yr</span><span class="o">.</span><span class="n">wool</span>
                <span class="o">*</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">lamb_more_1_yr</span><span class="o">.</span><span class="n">pop</span> <span class="o">-</span> <span class="n">animal</span><span class="o">.</span><span class="n">lamb_more_1_yr</span><span class="o">.</span><span class="n">n_sold</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span>
                <span class="n">animal</span><span class="o">.</span><span class="n">male_less_1_yr</span><span class="o">.</span><span class="n">wool</span>
                <span class="o">*</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">male_less_1_yr</span><span class="o">.</span><span class="n">pop</span> <span class="o">-</span> <span class="n">animal</span><span class="o">.</span><span class="n">male_less_1_yr</span><span class="o">.</span><span class="n">n_sold</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">ewes</span><span class="o">.</span><span class="n">wool</span> <span class="o">*</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">ewes</span><span class="o">.</span><span class="n">pop</span> <span class="o">-</span> <span class="n">animal</span><span class="o">.</span><span class="n">ewes</span><span class="o">.</span><span class="n">n_sold</span><span class="p">))</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">ram</span><span class="o">.</span><span class="n">wool</span> <span class="o">*</span> <span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="n">ram</span><span class="o">.</span><span class="n">pop</span> <span class="o">-</span> <span class="n">animal</span><span class="o">.</span><span class="n">ram</span><span class="o">.</span><span class="n">n_sold</span><span class="p">))</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="Allocation.lamb_allocation_factor">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Allocation.lamb_allocation_factor">[docs]</a>
    <span class="k">def</span> <span class="nf">lamb_allocation_factor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determines the economic allocation factor for lambs.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (Animal): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Economic allocation factor for lambs, as a proportion of the total output value.</span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="n">total</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lamb_live_weight_output_value</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sheep_live_weight_output_value</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wool_output_value</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lamb_live_weight_output_value</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span> <span class="o">/</span> <span class="n">total</span></div>



<div class="viewcode-block" id="Allocation.sheep_allocation_factor">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Allocation.sheep_allocation_factor">[docs]</a>
    <span class="k">def</span> <span class="nf">sheep_allocation_factor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Identifies the economic allocation factor for adult sheep.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (Animal): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Economic allocation factor for adult sheep, as a proportion of the total output value.</span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="n">total</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lamb_live_weight_output_value</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sheep_live_weight_output_value</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wool_output_value</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sheep_live_weight_output_value</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span> <span class="o">/</span> <span class="n">total</span></div>


<div class="viewcode-block" id="Allocation.wool_allocation_factor">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.Allocation.wool_allocation_factor">[docs]</a>
    <span class="k">def</span> <span class="nf">wool_allocation_factor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the economic allocation factor for wool.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (Animal): The animal instance for which the calculation is made.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Economic allocation factor for wool, as a proportion of the total output value.</span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="n">total</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lamb_live_weight_output_value</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sheep_live_weight_output_value</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wool_output_value</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wool_output_value</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span> <span class="o">/</span> <span class="n">total</span></div>
</div>



<span class="c1">################################################################################</span>
<span class="c1"># Total Global Warming Potential of whole farms</span>
<span class="c1">################################################################################</span>


<div class="viewcode-block" id="ClimateChangeTotals">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.ClimateChangeTotals">[docs]</a>
<span class="k">class</span> <span class="nc">ClimateChangeTotals</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class calculates total greenhouse gas emissions associated with various farm activities </span>
<span class="sd">    including enteric fermentation, manure management, soil management, and the upstream </span>
<span class="sd">    impacts of fuel and feed production. It utilizes data from various other classes to </span>
<span class="sd">    accumulate total emissions related to climate change.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        data_manager_class (LCADataManager): Manages lifecycle assessment data.</span>
<span class="sd">        grass_feed_class (GrassFeed): Manages grass feed-related calculations.</span>
<span class="sd">        grazing_class (GrazingStage): Manages grazing-related calculations.</span>
<span class="sd">        spread_class (DailySpread): Manages nutrient spreading-related calculations.</span>
<span class="sd">        housing_class (HousingStage): Manages housing-related calculations.</span>
<span class="sd">        storage_class (StorageStage): Manages manure storage-related calculations.</span>
<span class="sd">        fertiliser_class (FertiliserInputs): Manages fertiliser input-related calculations.</span>
<span class="sd">        upstream_class (Upstream): Manages upstream emissions calculations.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ef_country</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span> <span class="o">=</span> <span class="n">LCADataManager</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grass_feed_class</span> <span class="o">=</span> <span class="n">GrassFeed</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grazing_class</span> <span class="o">=</span> <span class="n">GrazingStage</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spread_class</span> <span class="o">=</span> <span class="n">DailySpread</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">housing_class</span> <span class="o">=</span> <span class="n">HousingStage</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">storage_class</span> <span class="o">=</span> <span class="n">StorageStage</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_class</span> <span class="o">=</span> <span class="n">FertiliserInputs</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">upstream_class</span> <span class="o">=</span> <span class="n">Upstream</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>

<div class="viewcode-block" id="ClimateChangeTotals.create_emissions_dictionary">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.ClimateChangeTotals.create_emissions_dictionary">[docs]</a>
    <span class="k">def</span> <span class="nf">create_emissions_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a dictionary template for emissions calculations with zero-initialized values.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            keys (list): List of animal cohorts or other categories for emissions calculation.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: A dictionary of dictionaries for organizing emissions data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;enteric_ch4&quot;</span><span class="p">,</span>
            <span class="s2">&quot;manure_management_N2O&quot;</span><span class="p">,</span>
            <span class="s2">&quot;manure_management_CH4&quot;</span><span class="p">,</span>
            <span class="s2">&quot;manure_applied_N&quot;</span><span class="p">,</span>
            <span class="s2">&quot;N_direct_PRP&quot;</span><span class="p">,</span>
            <span class="s2">&quot;N_direct_PRP&quot;</span><span class="p">,</span>
            <span class="s2">&quot;N_indirect_PRP&quot;</span><span class="p">,</span>
            <span class="s2">&quot;N_direct_fertiliser&quot;</span><span class="p">,</span>
            <span class="s2">&quot;N_indirect_fertiliser&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soils_CO2&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soil_organic_N_direct&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soil_organic_N_indirect&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soil_inorganic_N_direct&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soil_inorganic_N_indirect&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soil_histosol_N_direct&quot;</span><span class="p">,</span>
            <span class="s2">&quot;crop_residue_direct&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soil_N_direct&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soil_N_indirect&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soils_N2O&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="n">keys_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>

        <span class="n">emissions_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">key_list</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">emissions_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">emissions_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">keys_dict</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">inner_k</span> <span class="ow">in</span> <span class="n">keys_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">emissions_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">inner_k</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">return</span> <span class="n">emissions_dict</span></div>

    

<div class="viewcode-block" id="ClimateChangeTotals.create_expanded_emissions_dictionary">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.ClimateChangeTotals.create_expanded_emissions_dictionary">[docs]</a>
    <span class="k">def</span> <span class="nf">create_expanded_emissions_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extends the basic emissions dictionary template with additional categories for more </span>
<span class="sd">        detailed emissions calculations.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            keys (list): List of animal cohorts or other categories for detailed emissions calculation.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: An expanded dictionary of dictionaries for organizing detailed emissions data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;enteric_ch4&quot;</span><span class="p">,</span>
            <span class="s2">&quot;manure_management_N2O&quot;</span><span class="p">,</span>
            <span class="s2">&quot;manure_management_CH4&quot;</span><span class="p">,</span>
            <span class="s2">&quot;manure_applied_N&quot;</span><span class="p">,</span>
            <span class="s2">&quot;N_direct_PRP&quot;</span><span class="p">,</span>
            <span class="s2">&quot;N_direct_PRP&quot;</span><span class="p">,</span>
            <span class="s2">&quot;N_indirect_PRP&quot;</span><span class="p">,</span>
            <span class="s2">&quot;N_direct_fertiliser&quot;</span><span class="p">,</span>
            <span class="s2">&quot;N_indirect_fertiliser&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soils_CO2&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soil_organic_N_direct&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soil_organic_N_indirect&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soil_inorganic_N_direct&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soil_inorganic_N_indirect&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soil_N_direct&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soil_N_indirect&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soil_histosol_N_direct&quot;</span><span class="p">,</span>
            <span class="s2">&quot;crop_residue_direct&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soils_N2O&quot;</span><span class="p">,</span>
            <span class="s2">&quot;upstream_fuel_fert&quot;</span><span class="p">,</span>
            <span class="s2">&quot;upstream_feed&quot;</span><span class="p">,</span>
            <span class="s2">&quot;upstream&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="n">keys_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>

        <span class="n">emissions_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">key_list</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">emissions_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">emissions_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">keys_dict</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">inner_k</span> <span class="ow">in</span> <span class="n">keys_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">emissions_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">inner_k</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">return</span> <span class="n">emissions_dict</span></div>

    

<div class="viewcode-block" id="ClimateChangeTotals.Enteric_CH4">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.ClimateChangeTotals.Enteric_CH4">[docs]</a>
    <span class="k">def</span> <span class="nf">Enteric_CH4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates methane emissions from enteric fermentation for a given animal.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (AnimalCategory): The animal cohort for which emissions are being calculated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total methane emissions from enteric fermentation for the specified animal (kg CH4).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">grass_feed_class</span><span class="o">.</span><span class="n">ch4_emissions_factor</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span></div>


<div class="viewcode-block" id="ClimateChangeTotals.CH4_enteric_ch4">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.ClimateChangeTotals.CH4_enteric_ch4">[docs]</a>
    <span class="k">def</span> <span class="nf">CH4_enteric_ch4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Accumulates total methane emissions from enteric fermentation across all animal cohorts.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (AnimalCollection): Collection of animal cohorts within the farm system.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total methane emissions from enteric fermentation across all cohorts (kg CH4).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Enteric</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">animal</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_keys</span><span class="p">()</span>
                <span class="ow">and</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="p">):</span>

                <span class="n">Enteric</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">Enteric_CH4</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
                    <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">Enteric</span></div>


<div class="viewcode-block" id="ClimateChangeTotals.CH4_manure_management">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.ClimateChangeTotals.CH4_manure_management">[docs]</a>
    <span class="k">def</span> <span class="nf">CH4_manure_management</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates methane emissions from manure management for animal cohorts.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (AnimalCollection): Collection of animal cohorts within the farm system.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total methane emissions from manure management across all cohorts (kg CH4).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">animal</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_keys</span><span class="p">()</span>
                <span class="ow">and</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="p">):</span>

                <span class="n">result</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">Total_manure_ch4</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
                    <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="ClimateChangeTotals.PRP_Total">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.ClimateChangeTotals.PRP_Total">[docs]</a>
    <span class="k">def</span> <span class="nf">PRP_Total</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the total N2O emissions related to Pasture, Range, and Paddock (PRP) for a given animal.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (AnimalCategory): The animal cohort for which emissions are being calculated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total N2O emissions from PRP for the specified animal.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">grazing_class</span><span class="o">.</span><span class="n">PRP_N2O_direct</span><span class="p">(</span>
            <span class="n">animal</span>
        <span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">grazing_class</span><span class="o">.</span><span class="n">PRP_N2O_indirect</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span></div>


<div class="viewcode-block" id="ClimateChangeTotals.Total_storage_N2O">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.ClimateChangeTotals.Total_storage_N2O">[docs]</a>
    <span class="k">def</span> <span class="nf">Total_storage_N2O</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the total N2O emissions related to the storage of manure for a given animal collection.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (AnimalCategory): The animal collection for which emissions are being calculated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total N2O emissions from manure storage for the specified animal collection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mole_weight</span> <span class="o">=</span> <span class="mf">44.0</span> <span class="o">/</span> <span class="mf">28.0</span>

        <span class="n">n2o_direct</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">n2o_indirect_storage</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">n2o_indirect_housing</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">animal</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_keys</span><span class="p">()</span>
                <span class="ow">and</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="p">):</span>

                <span class="n">n2o_direct</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">storage_class</span><span class="o">.</span><span class="n">STORAGE_N2O_direct</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
                    <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span>
                <span class="p">)</span>
                <span class="n">n2o_indirect_storage</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">storage_class</span><span class="o">.</span><span class="n">STORAGE_N2O_indirect</span><span class="p">(</span>
                        <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span>
                <span class="p">)</span>
                <span class="n">n2o_indirect_housing</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">housing_class</span><span class="o">.</span><span class="n">HOUSING_N2O_indirect</span><span class="p">(</span>
                        <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">n2o_direct</span> <span class="o">+</span> <span class="n">n2o_indirect_storage</span> <span class="o">+</span> <span class="n">n2o_indirect_housing</span><span class="p">)</span> <span class="o">*</span> <span class="n">mole_weight</span></div>

    

<div class="viewcode-block" id="ClimateChangeTotals.N2O_total_PRP_N2O_direct">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.ClimateChangeTotals.N2O_total_PRP_N2O_direct">[docs]</a>
    <span class="k">def</span> <span class="nf">N2O_total_PRP_N2O_direct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the direct N2O emissions from pasture, range, and paddock for a given animal collection.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (AnimalCategory): The animal cohort collection for which emissions are being calculated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Direct N2O emissions from PRP for the specified animal collection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mole_weight</span> <span class="o">=</span> <span class="mf">44.0</span> <span class="o">/</span> <span class="mf">28.0</span>

        <span class="n">PRP_direct</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">animal</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_keys</span><span class="p">()</span>
                <span class="ow">and</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="p">):</span>

                <span class="n">PRP_direct</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">grazing_class</span><span class="o">.</span><span class="n">PRP_N2O_direct</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
                    <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">PRP_direct</span> <span class="o">*</span> <span class="n">mole_weight</span></div>


<div class="viewcode-block" id="ClimateChangeTotals.N2O_total_PRP_N2O_indirect">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.ClimateChangeTotals.N2O_total_PRP_N2O_indirect">[docs]</a>
    <span class="k">def</span> <span class="nf">N2O_total_PRP_N2O_indirect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the indirect N2O emissions from pasture, range, and paddock for a given animal collection.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (AnimalCategory): The animal cohort collection for which emissions are being calculated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Indirect N2O emissions from PRP for the specified animal collection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mole_weight</span> <span class="o">=</span> <span class="mf">44.0</span> <span class="o">/</span> <span class="mf">28.0</span>

        <span class="n">PRP_indirect</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">animal</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_keys</span><span class="p">()</span>
                <span class="ow">and</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="p">):</span>

                <span class="n">PRP_indirect</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">grazing_class</span><span class="o">.</span><span class="n">PRP_N2O_indirect</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
                    <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">PRP_indirect</span> <span class="o">*</span> <span class="n">mole_weight</span></div>


<div class="viewcode-block" id="ClimateChangeTotals.Total_manure_ch4">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.ClimateChangeTotals.Total_manure_ch4">[docs]</a>
    <span class="k">def</span> <span class="nf">Total_manure_ch4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the total methane emissions related to manure management for a given animal collection.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (AnimalCategory): The animal collection for which emissions are being calculated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total methane emissions from manure management for the specified animal collection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">grazing_class</span><span class="o">.</span><span class="n">ch4_emissions_for_grazing</span><span class="p">(</span>
            <span class="n">animal</span>
        <span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage_class</span><span class="o">.</span><span class="n">CH4_STORAGE</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span></div>


<div class="viewcode-block" id="ClimateChangeTotals.CO2_soils_GWP">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.ClimateChangeTotals.CO2_soils_GWP">[docs]</a>
    <span class="k">def</span> <span class="nf">CO2_soils_GWP</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total_urea</span><span class="p">,</span> <span class="n">total_lime</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the global warming potential from CO2 emissions related to soil management through urea and lime application.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            total_urea (float): Total amount of urea used (kg).</span>
<span class="sd">            total_lime (float): Total amount of lime used (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: CO2 emissions from soil management.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_class</span><span class="o">.</span><span class="n">urea_co2</span><span class="p">(</span><span class="n">total_urea</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_class</span><span class="o">.</span><span class="n">lime_co2</span><span class="p">(</span><span class="n">total_lime</span><span class="p">)</span></div>


<div class="viewcode-block" id="ClimateChangeTotals.N2O_direct_fertiliser">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.ClimateChangeTotals.N2O_direct_fertiliser">[docs]</a>
    <span class="k">def</span> <span class="nf">N2O_direct_fertiliser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">,</span> <span class="n">total_n_fert</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the total direct N2O emissions from urea and ammonium fertilizers.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            total_urea (float): Total amount of urea used (kg).</span>
<span class="sd">            total_urea_abated (float): Total amount of urea with emissions-reducing treatments applied (kg).</span>
<span class="sd">            total_n_fert (float): Total amount of nitrogen fertilizer used (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total direct N2O emissions from fertilizer application.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_class</span><span class="o">.</span><span class="n">urea_N2O_direct</span><span class="p">(</span><span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">)</span>
                <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_class</span><span class="o">.</span><span class="n">n_fertiliser_direct</span><span class="p">(</span><span class="n">total_n_fert</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">*</span> <span class="mf">44.0</span>
            <span class="o">/</span> <span class="mf">28.0</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="ClimateChangeTotals.N2O_fertiliser_indirect">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.ClimateChangeTotals.N2O_fertiliser_indirect">[docs]</a>
    <span class="k">def</span> <span class="nf">N2O_fertiliser_indirect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">,</span> <span class="n">total_n_fert</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the total indirect N2O emissions from urea and ammonium fertilizers.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            total_urea (float): Total amount of urea used (kg).</span>
<span class="sd">            total_urea_abated (float): Total amount of urea with emissions-reducing treatments applied (kg).</span>
<span class="sd">            total_n_fert (float): Total amount of nitrogen fertilizer used (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total indirect N2O emissions from fertilizer application.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_class</span><span class="o">.</span><span class="n">urea_N2O_indirect</span><span class="p">(</span><span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">)</span>
                <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_class</span><span class="o">.</span><span class="n">n_fertiliser_indirect</span><span class="p">(</span><span class="n">total_n_fert</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">*</span> <span class="mf">44.0</span>
            <span class="o">/</span> <span class="mf">28.0</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="ClimateChangeTotals.upstream_and_inputs_and_fuel_co2">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.ClimateChangeTotals.upstream_and_inputs_and_fuel_co2">[docs]</a>
    <span class="k">def</span> <span class="nf">upstream_and_inputs_and_fuel_co2</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">diesel_kg</span><span class="p">,</span>
        <span class="n">elec_kwh</span><span class="p">,</span>
        <span class="n">total_n_fert</span><span class="p">,</span>
        <span class="n">total_urea</span><span class="p">,</span>
        <span class="n">total_urea_abated</span><span class="p">,</span>
        <span class="n">total_p_fert</span><span class="p">,</span>
        <span class="n">total_k_fert</span><span class="p">,</span>
        <span class="n">total_lime_fert</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the total CO2 emissions from various upstream activities and inputs. </span>
<span class="sd">        This includes emissions from the use of diesel, electricity, and different types of fertilizers. </span>

<span class="sd">        Parameters:</span>
<span class="sd">        - diesel_kg: The amount of diesel used, in kilograms.</span>
<span class="sd">        - elec_kwh: The amount of electricity consumed, in kilowatt-hours.</span>
<span class="sd">        - total_n_fert: The total amount of nitrogen fertilizer used, in kilograms.</span>
<span class="sd">        - total_urea: The total amount of urea used, in kilograms.</span>
<span class="sd">        - total_urea_abated: The total amount of abated urea (urea treated to reduce emissions) used, in kilograms.</span>
<span class="sd">        - total_p_fert: The total amount of phosphorus fertilizer used, in kilograms.</span>
<span class="sd">        - total_k_fert: The total amount of potassium fertilizer used, in kilograms.</span>
<span class="sd">        - total_lime_fert: The total amount of lime fertilizer used, in kilograms.</span>

<span class="sd">        Returns:</span>
<span class="sd">        Total CO2 emissions from all specified sources, measured in equivalent kilograms of CO2.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">upstream_class</span><span class="o">.</span><span class="n">diesel_CO2</span><span class="p">(</span><span class="n">diesel_kg</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">upstream_class</span><span class="o">.</span><span class="n">elec_CO2</span><span class="p">(</span><span class="n">elec_kwh</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">upstream_class</span><span class="o">.</span><span class="n">fert_upstream_CO2</span><span class="p">(</span>
                <span class="n">total_n_fert</span><span class="p">,</span>
                <span class="n">total_urea</span><span class="p">,</span>
                <span class="n">total_urea_abated</span><span class="p">,</span>
                <span class="n">total_p_fert</span><span class="p">,</span>
                <span class="n">total_k_fert</span><span class="p">,</span>
                <span class="n">total_lime_fert</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span></div>

    
<div class="viewcode-block" id="ClimateChangeTotals.co2_from_concentrate_production">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.ClimateChangeTotals.co2_from_concentrate_production">[docs]</a>
    <span class="k">def</span> <span class="nf">co2_from_concentrate_production</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the CO2e emissions from the production of concentrates fed to the animal.</span>
<span class="sd">        This function looks at the type and amount of concentrate feed and uses predefined emission factors to estimate the CO2e impact.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - animal: The animal collection for which the CO2e emissions are being calculated.</span>
<span class="sd">        This object should contain the type and amount of concentrate feed consumed.</span>

<span class="sd">        Returns:</span>
<span class="sd">        The total CO2e emissions from the production of concentrate feed, measured in equivalent kilograms of CO2.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">upstream_class</span><span class="o">.</span><span class="n">co2_from_concentrate_production</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span></div>
</div>



<span class="c1">###############################################################################</span>
<span class="c1"># Water Quality EP PO4e</span>
<span class="c1">###############################################################################</span>


<div class="viewcode-block" id="EutrophicationTotals">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.EutrophicationTotals">[docs]</a>
<span class="k">class</span> <span class="nc">EutrophicationTotals</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class responsible for calculating the total eutrophication potential associated with a given farming operation. </span>
<span class="sd">    This includes contributions from manure management, soil management, fertiliser application, and upstream processes </span>
<span class="sd">    related to feed and fuel production.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        data_manager_class (LCADataManager): An instance of the LCADataManager class to access necessary emission factors and conversion values.</span>
<span class="sd">        grazing_class (GrazingStage): An instance of the GrazingStage class to access grazing-related eutrophication contributions.</span>
<span class="sd">        housing_class (HousingStage): An instance of the HousingStage class to access housing-related eutrophication contributions.</span>
<span class="sd">        storage_class (StorageStage): An instance of the StorageStage class to access storage-related eutrophication contributions.</span>
<span class="sd">        spread_class (DailySpread): An instance of the DailySpread class to access spreading-related eutrophication contributions.</span>
<span class="sd">        fertiliser_class (FertiliserInputs): An instance of the FertiliserInputs class to access fertiliser-related eutrophication contributions.</span>
<span class="sd">        upstream_class (Upstream): An instance of the Upstream class to access upstream-related eutrophication contributions.</span>

<span class="sd">    Methods:</span>
<span class="sd">        create_emissions_dictionary(keys): Creates a structured dictionary for tracking eutrophication emissions.</span>
<span class="sd">        create_expanded_emissions_dictionary(keys): Creates a more detailed structured dictionary for tracking eutrophication emissions, including upstream processes.</span>
<span class="sd">        total_manure_NH3_EP(animal): Calculates the total ammonia emissions from manure management, converted to phosphate equivalents.</span>
<span class="sd">        total_fertiliser_soils_NH3_and_LEACH_EP(total_urea, total_urea_abated, total_n_fert): Calculates total ammonia and leaching from fertiliser application to soils, converted to phosphate equivalents.</span>
<span class="sd">        total_grazing_soils_NH3_and_LEACH_EP(animal): Calculates total ammonia and leaching from grazing management to soils, converted to phosphate equivalents.</span>
<span class="sd">        fertiliser_soils_P_LEACH_EP(total_urea, total_urea_abated, total_n_fert, total_p_fert): Calculates total phosphorus leaching from fertiliser application, contributing to eutrophication.</span>
<span class="sd">        grazing_soils_P_LEACH_EP(animal): Calculates total phosphorus leaching from grazing, contributing to eutrophication.</span>
<span class="sd">        total_fertilser_soils_EP(total_urea, total_urea_abated, total_n_fert, total_p_fert): Aggregates total eutrophication potential from fertiliser applications to soils.</span>
<span class="sd">        total_grazing_soils_EP(animal): Aggregates total eutrophication potential from grazing management.</span>
<span class="sd">        upstream_and_inputs_and_fuel_po4(diesel_kg, elec_kwh, total_n_fert, total_urea, total_urea_abated, total_p_fert, total_k_fert, total_lime_fert): Calculates total eutrophication potential from upstream activities and inputs, including fuel and electricity usage.</span>
<span class="sd">        po4_from_concentrate_production(animal): Calculates total phosphorus emissions from concentrate production used in animal diets.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ef_country</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span> <span class="o">=</span> <span class="n">LCADataManager</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grazing_class</span> <span class="o">=</span> <span class="n">GrazingStage</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">housing_class</span> <span class="o">=</span> <span class="n">HousingStage</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">storage_class</span> <span class="o">=</span> <span class="n">StorageStage</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spread_class</span> <span class="o">=</span> <span class="n">DailySpread</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_class</span> <span class="o">=</span> <span class="n">FertiliserInputs</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">upstream_class</span> <span class="o">=</span> <span class="n">Upstream</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
    
<div class="viewcode-block" id="EutrophicationTotals.create_emissions_dictionary">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.EutrophicationTotals.create_emissions_dictionary">[docs]</a>
    <span class="k">def</span> <span class="nf">create_emissions_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a dictionary to store eutrophication emissions data for different categories.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">            keys: A list of keys representing different farm activities or emission sources.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            A dictionary with initialized values for each key and sub-key.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;manure_management&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soils&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="n">keys_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>

        <span class="n">emissions_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">key_list</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">emissions_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">emissions_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">keys_dict</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">inner_k</span> <span class="ow">in</span> <span class="n">keys_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">emissions_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">inner_k</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">return</span> <span class="n">emissions_dict</span></div>

    

<div class="viewcode-block" id="EutrophicationTotals.create_expanded_emissions_dictionary">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.EutrophicationTotals.create_expanded_emissions_dictionary">[docs]</a>
    <span class="k">def</span> <span class="nf">create_expanded_emissions_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates an expanded dictionary to store detailed eutrophication emissions data.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">            keys: A list of keys representing different farm activities or emission sources.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            An expanded dictionary with initialized values for each category and sub-category.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;manure_management&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soils&quot;</span><span class="p">,</span>
            <span class="s2">&quot;upstream_fuel_fert&quot;</span><span class="p">,</span>
            <span class="s2">&quot;upstream_feed&quot;</span><span class="p">,</span>
            <span class="s2">&quot;upstream&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="n">keys_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>

        <span class="n">emissions_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">key_list</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">emissions_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">emissions_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">keys_dict</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">inner_k</span> <span class="ow">in</span> <span class="n">keys_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">emissions_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">inner_k</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">return</span> <span class="n">emissions_dict</span></div>


    <span class="c1"># Manure Management</span>
<div class="viewcode-block" id="EutrophicationTotals.total_manure_NH3_EP">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.EutrophicationTotals.total_manure_NH3_EP">[docs]</a>
    <span class="k">def</span> <span class="nf">total_manure_NH3_EP</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total ammonia emissions from manure, converted to equivalent phosphorus, contributing to eutrophication potential.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">            animal: Animal data object containing manure emission details.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            Total ammonia emissions from manure management converted to phosphorus equivalent.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">indirect_atmosphere</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_indirect_atmospheric_deposition</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="n">NH3N</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">animal</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_keys</span><span class="p">()</span>
                <span class="ow">and</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="p">):</span>

                <span class="n">NH3N</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">storage_class</span><span class="o">.</span><span class="n">nh3_emissions_per_year_STORAGE</span><span class="p">(</span>
                        <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">housing_class</span><span class="o">.</span><span class="n">nh3_emissions_per_year_HOUSED</span><span class="p">(</span>
                        <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="p">)</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">NH3N</span> <span class="o">*</span> <span class="n">indirect_atmosphere</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.42</span></div>


    <span class="c1"># SOILS</span>
<div class="viewcode-block" id="EutrophicationTotals.total_fertiliser_soils_NH3_and_LEACH_EP">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.EutrophicationTotals.total_fertiliser_soils_NH3_and_LEACH_EP">[docs]</a>
    <span class="k">def</span> <span class="nf">total_fertiliser_soils_NH3_and_LEACH_EP</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">,</span> <span class="n">total_n_fert</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total ammonia and leaching emissions from fertilizer application, converted to phosphorus equivalent.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">            total_urea: Total amount of urea applied.</span>
<span class="sd">            total_urea_abated: Total amount of urea with abatement measures applied.</span>
<span class="sd">            total_n_fert: Total amount of nitrogen fertilizers applied.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            Total ammonia and leaching emissions from fertilizers, converted to phosphorus equivalent.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LEACH</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">NH3N</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">indirect_atmosphere</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_indirect_atmospheric_deposition</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">total_urea</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">total_urea_abated</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">total_n_fert</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">LEACH</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_class</span><span class="o">.</span><span class="n">urea_nleach</span><span class="p">(</span>
                <span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span>
            <span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_class</span><span class="o">.</span><span class="n">n_fertiliser_nleach</span><span class="p">(</span><span class="n">total_n_fert</span><span class="p">)</span>
            <span class="n">NH3N</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_class</span><span class="o">.</span><span class="n">urea_NH3</span><span class="p">(</span>
                <span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span>
            <span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_class</span><span class="o">.</span><span class="n">n_fertiliser_NH3</span><span class="p">(</span><span class="n">total_n_fert</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">NH3N</span> <span class="o">*</span> <span class="n">indirect_atmosphere</span><span class="p">)</span> <span class="o">+</span> <span class="n">LEACH</span> <span class="o">*</span> <span class="mf">0.42</span></div>


<div class="viewcode-block" id="EutrophicationTotals.total_grazing_soils_NH3_and_LEACH_EP">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.EutrophicationTotals.total_grazing_soils_NH3_and_LEACH_EP">[docs]</a>
    <span class="k">def</span> <span class="nf">total_grazing_soils_NH3_and_LEACH_EP</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total ammonia and leaching emissions from grazing soils, converted to phosphorus equivalent.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">            animal: Animal data object containing grazing information.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            Total ammonia and leaching emissions from grazing, converted to phosphorus equivalent.</span>

<span class="sd">        Note:</span>
<span class="sd">            Spreading not included for sheep.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LEACH</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">NH3N</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">indirect_atmosphere</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_indirect_atmospheric_deposition</span><span class="p">()</span>
        <span class="p">)</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">animal</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_keys</span><span class="p">()</span>
                <span class="ow">and</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="p">):</span>
                <span class="n">NH3N</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">grazing_class</span><span class="o">.</span><span class="n">nh3_emissions_per_year_GRAZING</span><span class="p">(</span>
                        <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span>
                <span class="p">)</span>

                <span class="c1"># Leach from grazing, none from spread for sheep</span>

                <span class="n">LEACH</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">grazing_class</span><span class="o">.</span><span class="n">Nleach_GRAZING</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
                    <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">NH3N</span> <span class="o">*</span> <span class="n">indirect_atmosphere</span><span class="p">)</span> <span class="o">+</span> <span class="n">LEACH</span> <span class="o">*</span> <span class="mf">0.42</span></div>


<div class="viewcode-block" id="EutrophicationTotals.fertiliser_soils_P_LEACH_EP">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.EutrophicationTotals.fertiliser_soils_P_LEACH_EP">[docs]</a>
    <span class="k">def</span> <span class="nf">fertiliser_soils_P_LEACH_EP</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">,</span> <span class="n">total_n_fert</span><span class="p">,</span> <span class="n">total_p_fert</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates phosphorus leaching from fertilizer application on soils.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">            total_urea: Total amount of urea applied.</span>
<span class="sd">            total_urea_abated: Total amount of urea with abatement measures applied.</span>
<span class="sd">            total_n_fert: Total amount of nitrogen fertilizers applied.</span>
<span class="sd">            total_p_fert: Total amount of phosphorus fertilizers applied.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            Total phosphorus leaching from fertilizers application.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">PLEACH</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">PLEACH</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_class</span><span class="o">.</span><span class="n">urea_P_leach</span><span class="p">(</span><span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_class</span><span class="o">.</span><span class="n">n_fertiliser_P_leach</span><span class="p">(</span><span class="n">total_n_fert</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_class</span><span class="o">.</span><span class="n">p_fertiliser_P_leach</span><span class="p">(</span><span class="n">total_p_fert</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">PLEACH</span> <span class="o">*</span> <span class="mf">3.06</span></div>


<div class="viewcode-block" id="EutrophicationTotals.grazing_soils_P_LEACH_EP">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.EutrophicationTotals.grazing_soils_P_LEACH_EP">[docs]</a>
    <span class="k">def</span> <span class="nf">grazing_soils_P_LEACH_EP</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates phosphorus leaching from grazing soils.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">            animal: Animal data object containing grazing information.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            Total phosphorus leaching from grazing activities.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">PLEACH</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">animal</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_keys</span><span class="p">()</span>
                <span class="ow">and</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="p">):</span>

                <span class="c1"># Just leach from grazing, not from manure application</span>
                <span class="n">PLEACH</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">grazing_class</span><span class="o">.</span><span class="n">PLeach_GRAZING</span><span class="p">(</span><span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
                    <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">PLEACH</span> <span class="o">*</span> <span class="mf">3.06</span></div>


<div class="viewcode-block" id="EutrophicationTotals.total_fertilser_soils_EP">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.EutrophicationTotals.total_fertilser_soils_EP">[docs]</a>
    <span class="k">def</span> <span class="nf">total_fertilser_soils_EP</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">total_urea</span><span class="p">,</span>
        <span class="n">total_urea_abated</span><span class="p">,</span>
        <span class="n">total_n_fert</span><span class="p">,</span>
        <span class="n">total_p_fert</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total eutrophication potential from fertilizer application on soils.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">            total_urea, total_urea_abated, total_n_fert, total_p_fert: Amounts of different fertilizers applied.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            Total eutrophication potential from fertilizer application.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_fertiliser_soils_NH3_and_LEACH_EP</span><span class="p">(</span>
            <span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">,</span> <span class="n">total_n_fert</span>
        <span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_soils_P_LEACH_EP</span><span class="p">(</span>
            <span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">,</span> <span class="n">total_n_fert</span><span class="p">,</span> <span class="n">total_p_fert</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="EutrophicationTotals.total_grazing_soils_EP">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.EutrophicationTotals.total_grazing_soils_EP">[docs]</a>
    <span class="k">def</span> <span class="nf">total_grazing_soils_EP</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total eutrophication potential from grazing soils.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">            animal: Animal data object containing grazing information.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            Total eutrophication potential from grazing activities.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_grazing_soils_NH3_and_LEACH_EP</span><span class="p">(</span>
            <span class="n">animal</span>
        <span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">grazing_soils_P_LEACH_EP</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span></div>



<div class="viewcode-block" id="EutrophicationTotals.upstream_and_inputs_and_fuel_po4">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.EutrophicationTotals.upstream_and_inputs_and_fuel_po4">[docs]</a>
    <span class="k">def</span> <span class="nf">upstream_and_inputs_and_fuel_po4</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">diesel_kg</span><span class="p">,</span>
        <span class="n">elec_kwh</span><span class="p">,</span>
        <span class="n">total_n_fert</span><span class="p">,</span>
        <span class="n">total_urea</span><span class="p">,</span>
        <span class="n">total_urea_abated</span><span class="p">,</span>
        <span class="n">total_p_fert</span><span class="p">,</span>
        <span class="n">total_k_fert</span><span class="p">,</span>
        <span class="n">total_lime_fert</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total phosphorus emissions from upstream activities, inputs, and fuel related to livestock production.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">            diesel_kg, elec_kwh, total_n_fert, total_urea, total_urea_abated, total_p_fert, total_k_fert, total_lime_fert: Quantities of inputs used.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            Total phosphorus emissions from upstream activities.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">upstream_class</span><span class="o">.</span><span class="n">diesel_PO4</span><span class="p">(</span><span class="n">diesel_kg</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">upstream_class</span><span class="o">.</span><span class="n">elec_CO2</span><span class="p">(</span><span class="n">elec_kwh</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">upstream_class</span><span class="o">.</span><span class="n">fert_upstream_CO2</span><span class="p">(</span>
                <span class="n">total_n_fert</span><span class="p">,</span>
                <span class="n">total_urea</span><span class="p">,</span>
                <span class="n">total_urea_abated</span><span class="p">,</span>
                <span class="n">total_p_fert</span><span class="p">,</span>
                <span class="n">total_k_fert</span><span class="p">,</span>
                <span class="n">total_lime_fert</span><span class="p">,</span>
            <span class="p">))</span></div>

    
<div class="viewcode-block" id="EutrophicationTotals.po4_from_concentrate_production">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.EutrophicationTotals.po4_from_concentrate_production">[docs]</a>
    <span class="k">def</span> <span class="nf">po4_from_concentrate_production</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the total phosphorus emissions (PO4 equivalent) resulting from the production of concentrate feeds used in animal diet.</span>
<span class="sd">        This method considers the entire lifecycle of concentrate production including the acquisition of raw materials, processing, and transportation.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal: An object representing the animal cohort, containing data related to the type and amount of concentrate consumed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The total phosphorus emissions (PO4 equivalent) from concentrate production for the given animal cohort over a specified period, contributing to the eutrophication potential of the system.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">upstream_class</span><span class="o">.</span><span class="n">po4_from_concentrate_production</span><span class="p">(</span><span class="n">animal</span><span class="p">)</span></div>
</div>


<span class="c1">###############################################################################</span>
<span class="c1"># Air Quality Ammonia</span>
<span class="c1">###############################################################################</span>


<div class="viewcode-block" id="AirQualityTotals">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.AirQualityTotals">[docs]</a>
<span class="k">class</span> <span class="nc">AirQualityTotals</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class calculates the total ammonia (NH3) emissions contributing to air quality impacts from various </span>
<span class="sd">    farm management practices including manure management, soil management, and fertilization strategies. </span>
<span class="sd">    The calculations are based on the lifecycle of animal cohorts and their feed, manure handling practices, as well as fertiliser application rates.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        data_manager_class (LCADataManager): A class instance that provides access to necessary emission factors and data specific to a given country or region.</span>
<span class="sd">        grazing_class (GrazingStage): A class instance to calculate emissions from grazing practices.</span>
<span class="sd">        housing_class (HousingStage): A class instance to calculate emissions from animal housing practices.</span>
<span class="sd">        storage_class (StorageStage): A class instance to calculate emissions from manure storage practices.</span>
<span class="sd">        spread_class (DailySpread): A class instance to calculate emissions from manure spreading practices.</span>
<span class="sd">        fertiliser_class (FertiliserInputs): A class instance to calculate emissions from fertiliser application.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ef_country</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span> <span class="o">=</span> <span class="n">LCADataManager</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grazing_class</span> <span class="o">=</span> <span class="n">GrazingStage</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">housing_class</span> <span class="o">=</span> <span class="n">HousingStage</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">storage_class</span> <span class="o">=</span> <span class="n">StorageStage</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spread_class</span> <span class="o">=</span> <span class="n">DailySpread</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_class</span> <span class="o">=</span> <span class="n">FertiliserInputs</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">upstream_class</span> <span class="o">=</span> <span class="n">Upstream</span><span class="p">(</span><span class="n">ef_country</span><span class="p">)</span>


<div class="viewcode-block" id="AirQualityTotals.create_emissions_dictionary">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.AirQualityTotals.create_emissions_dictionary">[docs]</a>
    <span class="k">def</span> <span class="nf">create_emissions_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a nested dictionary structure to store NH3 emission values from various sources categorized by specific keys (e.g., animal types).</span>

<span class="sd">        Parameters:</span>
<span class="sd">            keys (list): A list of string keys representing different emission categories or animal types.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: A nested dictionary structured to hold emission values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;manure_management&quot;</span><span class="p">,</span>
            <span class="s2">&quot;soils&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="n">keys_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>

        <span class="n">emissions_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">key_list</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">emissions_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">emissions_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">keys_dict</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">inner_k</span> <span class="ow">in</span> <span class="n">keys_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">emissions_dict</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">inner_k</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">return</span> <span class="n">emissions_dict</span></div>

    

    <span class="c1"># Manure Management</span>
<div class="viewcode-block" id="AirQualityTotals.total_manure_NH3_AQ">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.AirQualityTotals.total_manure_NH3_AQ">[docs]</a>
    <span class="k">def</span> <span class="nf">total_manure_NH3_AQ</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total NH3 emissions from manure management practices for the specified animal collection.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (Animal): An instance representing a specific animal collection.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total NH3 emissions (kg) from manure management for the specified animal collection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">NH3N</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">animal</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_keys</span><span class="p">()</span>
                <span class="ow">and</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="p">):</span>

                <span class="n">NH3N</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">storage_class</span><span class="o">.</span><span class="n">nh3_emissions_per_year_STORAGE</span><span class="p">(</span>
                        <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">),</span>
                    <span class="p">)</span>
                    <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">housing_class</span><span class="o">.</span><span class="n">nh3_emissions_per_year_HOUSED</span><span class="p">(</span>
                        <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">),</span>
                    <span class="p">)</span>
                <span class="p">)</span> <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span>

        <span class="k">return</span> <span class="n">NH3N</span></div>


    <span class="c1"># SOILS</span>
<div class="viewcode-block" id="AirQualityTotals.total_fertiliser_soils_NH3_AQ">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.AirQualityTotals.total_fertiliser_soils_NH3_AQ">[docs]</a>
    <span class="k">def</span> <span class="nf">total_fertiliser_soils_NH3_AQ</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span><span class="p">,</span> <span class="n">total_n_fert</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total NH3 emissions from fertiliser application to soils.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            total_urea (float): Total urea fertiliser applied (kg).</span>
<span class="sd">            total_urea_abated (float): Total abated urea fertiliser applied (kg).</span>
<span class="sd">            total_n_fert (float): Total nitrogen fertiliser applied (kg).</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total NH3 emissions (kg) from fertiliser application to soils.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">NH3N</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_class</span><span class="o">.</span><span class="n">urea_NH3</span><span class="p">(</span>
            <span class="n">total_urea</span><span class="p">,</span> <span class="n">total_urea_abated</span>
        <span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fertiliser_class</span><span class="o">.</span><span class="n">n_fertiliser_NH3</span><span class="p">(</span><span class="n">total_n_fert</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">NH3N</span></div>


<div class="viewcode-block" id="AirQualityTotals.total_grazing_soils_NH3_AQ">
<a class="viewcode-back" href="../../autoapi/sheep_lca/lca/index.html#sheep_lca.lca.AirQualityTotals.total_grazing_soils_NH3_AQ">[docs]</a>
    <span class="k">def</span> <span class="nf">total_grazing_soils_NH3_AQ</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">animal</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates total NH3 emissions from soils during grazing for the specified animal collection.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            animal (Animal): An instance representing a specific animal collection.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Total NH3 emissions (kg) from soils during grazing for the specified animal collection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">NH3N</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">animal</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_manager_class</span><span class="o">.</span><span class="n">get_cohort_keys</span><span class="p">()</span>
                <span class="ow">and</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="p">):</span>
                <span class="n">NH3N</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">grazing_class</span><span class="o">.</span><span class="n">nh3_emissions_per_year_GRAZING</span><span class="p">(</span>
                        <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="o">*</span> <span class="n">animal</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">NH3N</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Colm Duffy.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>